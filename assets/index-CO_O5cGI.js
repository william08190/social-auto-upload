import{b as _e,ax as it,r as M,c as g,R as e,J as t,al as v,o as d,a as l,K as Be,S as Oe,u as k,p as De,t as Ne,I as Z,ay as ut,P as A,O as u,az as He,X as dt,L as O,E as Y,w as rt,Q as de,a5 as re,W as ct,aA as pt,aB as ft,aC as mt,au as vt}from"./vue-DsQqJGJA.js";import{h as _t,u as Qe,p as gt,a as ge,m as yt,d as Xe,f as ht,E as m,b as kt,l as bt,c as wt,e as $t,t as Ct,r as xe,g as Pe,i as ze,j as Vt,k as At,n as Ge,o as Ke,q as xt,s as Tt,v as Mt,w as Ut}from"./elementPlus-C1rwBt7A.js";import{a as St}from"./utils-B9ygI19o.js";(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))x($);new MutationObserver($=>{for(const R of $)if(R.type==="childList")for(const T of R.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&x(T)}).observe(document,{childList:!0,subtree:!0});function w($){const R={};return $.integrity&&(R.integrity=$.integrity),$.referrerPolicy&&(R.referrerPolicy=$.referrerPolicy),$.crossOrigin==="use-credentials"?R.credentials="include":$.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function x($){if($.ep)return;$.ep=!0;const R=w($);fetch($.href,R)}})();const Pt="/vite.svg",Se=(_,y)=>{const w=_.__vccOpts||_;for(const[x,$]of y)w[x]=$;return w},zt={id:"app"},Dt={class:"sidebar"},Lt={class:"logo"},Et={src:Pt,alt:"Logo",class:"logo-img"},Ft={class:"header-content"},Rt={class:"header-left"},It={__name:"App",setup(_){const y=it(),w=_e(()=>y.path),x=M(!1),$=()=>{x.value=!x.value};return(R,T)=>{const U=v("el-icon"),C=v("el-menu-item"),L=v("el-menu"),F=v("el-aside"),r=v("el-header"),S=v("router-view"),P=v("el-main"),q=v("el-container");return d(),g("div",zt,[e(q,null,{default:t(()=>[e(F,{width:x.value?"64px":"200px"},{default:t(()=>[l("div",Dt,[l("div",Lt,[Be(l("img",Et,null,512),[[Oe,x.value]]),Be(l("h2",null,"自媒体自动化运营系统",512),[[Oe,!x.value]])]),e(L,{router:!0,"default-active":w.value,collapse:x.value,class:"sidebar-menu","background-color":"#001529","text-color":"#fff","active-text-color":"#409EFF"},{default:t(()=>[e(C,{index:"/"},{default:t(()=>[e(U,null,{default:t(()=>[e(k(_t))]),_:1}),T[0]||(T[0]=l("span",null,"首页",-1))]),_:1}),e(C,{index:"/account-management"},{default:t(()=>[e(U,null,{default:t(()=>[e(k(Qe))]),_:1}),T[1]||(T[1]=l("span",null,"账号管理",-1))]),_:1}),e(C,{index:"/material-management"},{default:t(()=>[e(U,null,{default:t(()=>[e(k(gt))]),_:1}),T[2]||(T[2]=l("span",null,"素材管理",-1))]),_:1}),e(C,{index:"/publish-center"},{default:t(()=>[e(U,null,{default:t(()=>[e(k(ge))]),_:1}),T[3]||(T[3]=l("span",null,"发布中心",-1))]),_:1}),e(C,{index:"/website"},{default:t(()=>[e(U,null,{default:t(()=>[e(k(yt))]),_:1}),T[4]||(T[4]=l("span",null,"网站",-1))]),_:1}),e(C,{index:"/data"},{default:t(()=>[e(U,null,{default:t(()=>[e(k(Xe))]),_:1}),T[5]||(T[5]=l("span",null,"数据",-1))]),_:1})]),_:1},8,["default-active","collapse"])])]),_:1},8,["width"]),e(q,null,{default:t(()=>[e(r,null,{default:t(()=>[l("div",Ft,[l("div",Rt,[e(U,{class:"toggle-sidebar",onClick:$},{default:t(()=>[e(k(ht))]),_:1})]),T[6]||(T[6]=l("div",{class:"header-right"},null,-1))])]),_:1}),e(P,null,{default:t(()=>[e(S)]),_:1})]),_:1})]),_:1})])}}},Bt=Se(It,[["__scopeId","data-v-176fbaed"]]),Te=St.create({baseURL:"http://localhost:5409",headers:{"Content-Type":"application/json"}});Te.interceptors.request.use(_=>{const y=localStorage.getItem("token");return y&&(_.headers.Authorization=`Bearer ${y}`),_},_=>(console.error("请求错误:",_),Promise.reject(_)));Te.interceptors.response.use(_=>{const{data:y}=_;return y.code===200||y.success?y:(m.error(y.message||"请求失败"),Promise.reject(new Error(y.message||"请求失败")))},_=>{if(console.error("响应错误:",_),_.response){const{status:y}=_.response;switch(y){case 401:m.error("未授权，请重新登录");break;case 403:m.error("拒绝访问");break;case 404:m.error("请求地址不存在");break;case 500:m.error("服务器内部错误");break;default:m.error("网络错误")}}else m.error("网络连接失败");return Promise.reject(_)});const Ce={get(_,y){return Te.get(_,{params:y})},post(_,y,w={}){return Te.post(_,y,w)},put(_,y,w={}){return Te.put(_,y,w)},delete(_,y){return Te.delete(_,{params:y})},upload(_,y,w){return Te.post(_,y,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:w})}},Ue={getValidAccounts(){return Ce.get("/getValidAccounts")},getAccounts(){return Ce.get("/getAccounts")},addAccount(_){return Ce.post("/account",_)},updateAccount(_){return Ce.post("/updateUserinfo",_)},deleteAccount(_){return Ce.get(`/deleteAccount?id=${_}`)}},$e={getAllMaterials:()=>Ce.get("/getFiles"),uploadMaterial:(_,y)=>Ce.upload("/uploadSave",_,y),deleteMaterial:_=>Ce.get(`/deleteFile?id=${_}`),downloadMaterial:_=>`http://localhost:5409/download/${_}`,getMaterialPreviewUrl:_=>`http://localhost:5409/getFile?filename=${_}`},Ot={class:"dashboard"},Nt={class:"dashboard-content"},jt={class:"stat-card-content"},qt={class:"stat-icon"},Jt={class:"stat-info"},Wt={class:"stat-value"},Kt={class:"stat-footer"},Ht={class:"stat-detail"},Qt={class:"stat-card-content"},Xt={class:"stat-icon platform-icon"},Gt={class:"stat-info"},Yt={class:"stat-value"},Zt={class:"stat-footer"},el={class:"stat-detail"},tl={class:"stat-card-content"},ll={class:"stat-icon task-icon"},sl={class:"stat-info"},al={class:"stat-value"},ol={class:"stat-footer"},nl={class:"stat-detail"},il={class:"stat-card-content"},ul={class:"stat-icon content-icon"},dl={class:"stat-info"},rl={class:"stat-value"},cl={class:"stat-footer"},pl={class:"stat-detail"},fl={class:"quick-actions"},ml={class:"action-icon"},vl={class:"action-icon"},_l={class:"action-icon"},gl={class:"action-icon"},yl={class:"recent-tasks"},hl={class:"section-header"},kl={__name:"Dashboard",setup(_){const y=ut(),w=De({total:0,normal:0,abnormal:0}),x=De({total:4,kuaishou:0,douyin:0,channels:0,xiaohongshu:0}),$=De({total:0,totalSize:0}),R=M([]),T=async()=>{try{const F=await Ue.getAccounts();if(F.code===200&&F.data){const S=F.data;w.total=S.length,w.normal=S.filter(P=>P[4]===1).length,w.abnormal=S.filter(P=>P[4]!==1).length,x.xiaohongshu=S.filter(P=>P[1]===1).length,x.channels=S.filter(P=>P[1]===2).length,x.douyin=S.filter(P=>P[1]===3).length,x.kuaishou=S.filter(P=>P[1]===4).length}const r=await $e.getAllMaterials();if(r.code===200&&r.data){const S=r.data;$.total=S.length,$.totalSize=S.reduce((P,q)=>P+(q.filesize||0),0).toFixed(2),R.value=S.slice(0,5).map(P=>({id:P.id,filename:P.filename,filesize:P.filesize,upload_time:P.upload_time,file_path:P.file_path}))}}catch(F){console.error("获取仪表盘数据失败:",F)}};Ne(()=>{T()});const U=F=>{y.push(F)},C=()=>{m.info("正在刷新数据..."),T().then(()=>{m.success("数据刷新完成")})},L=F=>{y.push("/material-management")};return(F,r)=>{const S=v("el-icon"),P=v("el-card"),q=v("el-col"),ce=v("el-tag"),K=v("el-tooltip"),H=v("el-row"),G=v("el-button"),E=v("el-table-column"),ye=v("el-table"),j=v("el-empty");return d(),g("div",Ot,[r[20]||(r[20]=l("div",{class:"page-header"},[l("h1",null,"自媒体自动化运营系统")],-1)),l("div",Nt,[e(H,{gutter:20},{default:t(()=>[e(q,{span:6},{default:t(()=>[e(P,{class:"stat-card"},{default:t(()=>[l("div",jt,[l("div",qt,[e(S,null,{default:t(()=>[e(k(Qe))]),_:1})]),l("div",Jt,[l("div",Wt,A(w.total),1),r[4]||(r[4]=l("div",{class:"stat-label"},"账号总数",-1))])]),l("div",Kt,[l("div",Ht,[l("span",null,"正常: "+A(w.normal),1),l("span",null,"异常: "+A(w.abnormal),1)])])]),_:1})]),_:1}),e(q,{span:6},{default:t(()=>[e(P,{class:"stat-card"},{default:t(()=>[l("div",Qt,[l("div",Xt,[e(S,null,{default:t(()=>[e(k(kt))]),_:1})]),l("div",Gt,[l("div",Yt,A(x.total),1),r[5]||(r[5]=l("div",{class:"stat-label"},"平台总数",-1))])]),l("div",Zt,[l("div",el,[e(K,{content:"快手账号",placement:"top"},{default:t(()=>[e(ce,{size:"small",type:"success"},{default:t(()=>[u(A(x.kuaishou),1)]),_:1})]),_:1}),e(K,{content:"抖音账号",placement:"top"},{default:t(()=>[e(ce,{size:"small",type:"danger"},{default:t(()=>[u(A(x.douyin),1)]),_:1})]),_:1}),e(K,{content:"视频号账号",placement:"top"},{default:t(()=>[e(ce,{size:"small",type:"warning"},{default:t(()=>[u(A(x.channels),1)]),_:1})]),_:1}),e(K,{content:"小红书账号",placement:"top"},{default:t(()=>[e(ce,{size:"small",type:"info"},{default:t(()=>[u(A(x.xiaohongshu),1)]),_:1})]),_:1})])])]),_:1})]),_:1}),e(q,{span:6},{default:t(()=>[e(P,{class:"stat-card"},{default:t(()=>[l("div",tl,[l("div",ll,[e(S,null,{default:t(()=>[e(k(bt))]),_:1})]),l("div",sl,[l("div",al,A($.total),1),r[6]||(r[6]=l("div",{class:"stat-label"},"素材总数",-1))])]),l("div",ol,[l("div",nl,[l("span",null,"总大小: "+A($.totalSize)+" MB",1)])])]),_:1})]),_:1}),e(q,{span:6},{default:t(()=>[e(P,{class:"stat-card"},{default:t(()=>[l("div",il,[l("div",ul,[e(S,null,{default:t(()=>[e(k(wt))]),_:1})]),l("div",dl,[l("div",rl,A($.totalSize),1),r[7]||(r[7]=l("div",{class:"stat-label"},"存储空间(MB)",-1))])]),l("div",cl,[l("div",pl,[l("span",null,"素材数: "+A($.total),1)])])]),_:1})]),_:1})]),_:1}),l("div",fl,[r[16]||(r[16]=l("h2",null,"快捷操作",-1)),e(H,{gutter:20},{default:t(()=>[e(q,{span:6},{default:t(()=>[e(P,{class:"action-card",onClick:r[0]||(r[0]=te=>U("/account-management"))},{default:t(()=>[l("div",ml,[e(S,null,{default:t(()=>[e(k($t))]),_:1})]),r[8]||(r[8]=l("div",{class:"action-title"},"账号管理",-1)),r[9]||(r[9]=l("div",{class:"action-desc"},"管理所有平台账号",-1))]),_:1})]),_:1}),e(q,{span:6},{default:t(()=>[e(P,{class:"action-card",onClick:r[1]||(r[1]=te=>U("/material-management"))},{default:t(()=>[l("div",vl,[e(S,null,{default:t(()=>[e(k(ge))]),_:1})]),r[10]||(r[10]=l("div",{class:"action-title"},"素材管理",-1)),r[11]||(r[11]=l("div",{class:"action-desc"},"上传和管理视频素材",-1))]),_:1})]),_:1}),e(q,{span:6},{default:t(()=>[e(P,{class:"action-card",onClick:r[2]||(r[2]=te=>U("/publish-center"))},{default:t(()=>[l("div",_l,[e(S,null,{default:t(()=>[e(k(Ct))]),_:1})]),r[12]||(r[12]=l("div",{class:"action-title"},"发布中心",-1)),r[13]||(r[13]=l("div",{class:"action-desc"},"发布视频到各平台",-1))]),_:1})]),_:1}),e(q,{span:6},{default:t(()=>[e(P,{class:"action-card",onClick:C},{default:t(()=>[l("div",gl,[e(S,null,{default:t(()=>[e(k(Xe))]),_:1})]),r[14]||(r[14]=l("div",{class:"action-title"},"刷新数据",-1)),r[15]||(r[15]=l("div",{class:"action-desc"},"刷新仪表盘统计数据",-1))]),_:1})]),_:1})]),_:1})]),l("div",yl,[l("div",hl,[r[18]||(r[18]=l("h2",null,"最近上传的素材",-1)),e(G,{text:"",onClick:r[3]||(r[3]=te=>U("/material-management"))},{default:t(()=>[...r[17]||(r[17]=[u("查看全部",-1)])]),_:1})]),R.value.length>0?(d(),Z(ye,{key:0,data:R.value,style:{width:"100%"}},{default:t(()=>[e(E,{prop:"filename",label:"文件名",width:"300"}),e(E,{prop:"filesize",label:"大小(MB)",width:"120"}),e(E,{prop:"upload_time",label:"上传时间",width:"180"}),e(E,{label:"操作"},{default:t(te=>[e(G,{size:"small",onClick:N=>L(te.row)},{default:t(()=>[...r[19]||(r[19]=[u("查看",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])):(d(),Z(j,{key:1,description:"暂无素材，请先上传"}))])])])}}},bl=Se(kl,[["__scopeId","data-v-4faaca46"]]),Ye=He("account",()=>{const _=M([]),y={1:"小红书",2:"视频号",3:"抖音",4:"快手"};return{accounts:_,setAccounts:U=>{_.value=U.map(C=>({id:C[0],type:C[1],filePath:C[2],name:C[3],status:C[4]===1?"正常":"异常",platform:y[C[1]]||"未知",avatar:"/vite.svg"}))},addAccount:U=>{_.value.push(U)},updateAccount:(U,C)=>{const L=_.value.findIndex(F=>F.id===U);L!==-1&&(_.value[L]={..._.value[L],...C})},deleteAccount:U=>{_.value=_.value.filter(C=>C.id!==U)},getAccountsByPlatform:U=>_.value.filter(C=>C.platform===U)}}),je=He("app",()=>{const _=M(!0),y=M(!0),w=M(!1),x=M([]);return{isFirstTimeAccountManagement:_,isFirstTimeMaterialManagement:y,isAccountRefreshing:w,materials:x,setAccountManagementVisited:()=>{_.value=!1},setMaterialManagementVisited:()=>{y.value=!1},resetVisitStatus:()=>{_.value=!0,y.value=!0},setMaterials:r=>{x.value=r},addMaterial:r=>{x.value.push(r)},removeMaterial:r=>{const S=x.value.findIndex(P=>P.id===r);S>-1&&x.value.splice(S,1)},setAccountRefreshing:r=>{w.value=r}}}),wl={class:"account-management"},$l={class:"account-tabs"},Cl={class:"account-list-container"},Vl={class:"account-search"},Al={class:"action-buttons"},xl={key:0},Tl={key:0,class:"account-list"},Ml={key:1,class:"empty-data"},Ul={class:"account-list-container"},Sl={class:"account-search"},Pl={class:"action-buttons"},zl={key:0},Dl={key:0,class:"account-list"},Ll={key:1,class:"empty-data"},El={class:"account-list-container"},Fl={class:"account-search"},Rl={class:"action-buttons"},Il={key:0},Bl={key:0,class:"account-list"},Ol={key:1,class:"empty-data"},Nl={class:"account-list-container"},jl={class:"account-search"},ql={class:"action-buttons"},Jl={key:0},Wl={key:0,class:"account-list"},Kl={key:1,class:"empty-data"},Hl={class:"account-list-container"},Ql={class:"account-search"},Xl={class:"action-buttons"},Gl={key:0},Yl={key:0,class:"account-list"},Zl={key:1,class:"empty-data"},es={key:0,class:"qrcode-container"},ts={key:0,class:"qrcode-wrapper"},ls=["src"],ss={key:1,class:"loading-wrapper"},as={key:2,class:"success-wrapper"},os={key:3,class:"error-wrapper"},ns={class:"dialog-footer"},is={__name:"AccountManagement",setup(_){const y=Ye(),w=je(),x=M("all"),$=M(""),R=async()=>{try{const c=await Ue.getAccounts();if(c.code===200&&c.data){const o=c.data.map(z=>{const h=[...z];return h[4]="验证中",h});y.setAccounts(o)}}catch(c){console.error("快速获取账号数据失败:",c)}},T=async()=>{if(!w.isAccountRefreshing){w.setAccountRefreshing(!0);try{const c=await Ue.getValidAccounts();c.code===200&&c.data?(y.setAccounts(c.data),m.success("账号数据获取成功"),w.isFirstTimeAccountManagement&&w.setAccountManagementVisited()):m.error("获取账号数据失败")}catch(c){console.error("获取账号数据失败:",c),m.error("获取账号数据失败")}finally{w.setAccountRefreshing(!1)}}},U=async()=>{setTimeout(async()=>{try{const c=await Ue.getValidAccounts();c.code===200&&c.data&&y.setAccounts(c.data)}catch(c){console.error("后台验证账号失败:",c)}},0)};Ne(()=>{R(),setTimeout(()=>{U()},100)});const C=c=>({快手:"success",抖音:"danger",视频号:"warning",小红书:"info"})[c]||"info",L=c=>c==="异常",F=c=>c==="验证中"?"info":c==="正常"?"success":"danger",r=c=>{L(c.status)&&ee(c)},S=_e(()=>$.value?y.accounts.filter(c=>c.name.includes($.value)):y.accounts),P=_e(()=>S.value.filter(c=>c.platform==="快手")),q=_e(()=>S.value.filter(c=>c.platform==="抖音")),ce=_e(()=>S.value.filter(c=>c.platform==="视频号")),K=_e(()=>S.value.filter(c=>c.platform==="小红书")),H=()=>{},G=M(!1),E=M("add"),ye=M(null),j=De({id:null,name:"",platform:"",status:"正常"}),te={platform:[{required:!0,message:"请选择平台",trigger:"change"}],name:[{required:!0,message:"请输入账号名称",trigger:"blur"}]},N=M(!1),le=M(""),oe=M(""),V=()=>{E.value="add",Object.assign(j,{id:null,name:"",platform:"",status:"正常"}),N.value=!1,le.value="",oe.value="",G.value=!0},f=c=>{E.value="edit",Object.assign(j,{id:c.id,name:c.name,platform:c.platform,status:c.status}),G.value=!0},J=c=>{Ge.confirm(`确定要删除账号 ${c.name} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const o=await Ue.deleteAccount(c.id);o.code===200?(y.deleteAccount(c.id),m({type:"success",message:"删除成功"})):m.error(o.msg||"删除失败")}catch(o){console.error("删除账号失败:",o),m.error("删除账号失败")}}).catch(()=>{})},Q=c=>{const z=`http://localhost:5409/downloadCookie?filePath=${encodeURIComponent(c.filePath)}`,h=document.createElement("a");h.href=z,h.download=`${c.name}_cookie.json`,h.target="_blank",h.style.display="none",document.body.appendChild(h),h.click(),document.body.removeChild(h)},ne=c=>{const o=document.createElement("input");o.type="file",o.accept=".json",o.style.display="none",document.body.appendChild(o),o.onchange=async z=>{const h=z.target.files[0];if(h){if(!h.name.endsWith(".json")){m.error("请选择JSON格式的Cookie文件"),document.body.removeChild(o);return}try{const I=new FormData;I.append("file",h),I.append("id",c.id),I.append("platform",c.platform);const B=await(await fetch("http://localhost:5409/uploadCookie",{method:"POST",body:I})).json();B.code===200?(m.success("Cookie文件上传成功"),T()):m.error(B.msg||"Cookie文件上传失败")}catch(I){console.error("上传Cookie文件失败:",I),m.error("Cookie文件上传失败")}finally{document.body.removeChild(o)}}},o.click()},ee=c=>{E.value="edit",Object.assign(j,{id:c.id,name:c.name,platform:c.platform,status:c.status}),N.value=!1,le.value="",oe.value="",G.value=!0,setTimeout(()=>{we(c.platform,c.name)},300)},se=c=>`https://ui-avatars.com/api/?name=${encodeURIComponent(c)}&background=random`;let pe=null;const ae=()=>{pe&&(pe.close(),pe=null)},we=(c,o)=>{ae(),N.value=!0,le.value="",oe.value="";const he=`http://localhost:5409/login?type=${{小红书:"1",视频号:"2",抖音:"3",快手:"4"}[c]||"1"}&id=${encodeURIComponent(o)}`;pe=new EventSource(he),pe.onmessage=D=>{const B=D.data;if(console.log("SSE消息:",B),!le.value&&B.length>100)try{B.startsWith("data:image")?le.value=B:le.value=`data:image/png;base64,${B}`,console.log("设置二维码数据，长度:",B.length)}catch(ie){console.error("处理二维码数据出错:",ie)}else(B==="200"||B==="500")&&(oe.value=B,B==="200"?setTimeout(()=>{ae(),setTimeout(()=>{G.value=!1,N.value=!1,m.success(E.value==="edit"?"重新登录成功":"账号添加成功"),m({type:"info",message:"正在同步账号信息...",duration:0}),T().then(()=>{m.closeAll(),m.success("账号信息已更新")})},1e3)},1e3):(ae(),setTimeout(()=>{N.value=!1,le.value="",oe.value=""},2e3)))},pe.onerror=D=>{console.error("SSE连接错误:",D),m.error("连接服务器失败，请稍后再试"),ae(),N.value=!1}},Ve=()=>{ye.value.validate(async c=>{if(c)if(E.value==="add")we(j.platform,j.name);else try{const z={快手:1,抖音:2,视频号:3,小红书:4}[j.platform]||1,h=await Ue.updateAccount({id:j.id,type:z,userName:j.name});if(h.code===200){const I={id:j.id,name:j.name,platform:j.platform,status:j.status};y.updateAccount(j.id,I),m.success("更新成功"),G.value=!1,T()}else m.error(h.msg||"更新账号失败")}catch(o){console.error("更新账号失败:",o),m.error("更新账号失败")}else return!1})};return dt(()=>{ae()}),(c,o)=>{const z=v("el-input"),h=v("el-button"),I=v("el-icon"),he=v("el-avatar"),D=v("el-table-column"),B=v("el-tag"),ie=v("el-table"),ke=v("el-empty"),ue=v("el-tab-pane"),fe=v("el-tabs"),be=v("el-option"),Fe=v("el-select"),Ee=v("el-form-item"),n=v("el-form"),a=v("el-dialog");return d(),g("div",wl,[o[40]||(o[40]=l("div",{class:"page-header"},[l("h1",null,"账号管理")],-1)),l("div",$l,[e(fe,{modelValue:x.value,"onUpdate:modelValue":o[5]||(o[5]=s=>x.value=s),class:"account-tabs-nav"},{default:t(()=>[e(ue,{label:"全部",name:"all"},{default:t(()=>[l("div",Cl,[l("div",Vl,[e(z,{modelValue:$.value,"onUpdate:modelValue":o[0]||(o[0]=s=>$.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Al,[e(h,{type:"primary",onClick:V},{default:t(()=>[...o[10]||(o[10]=[u("添加账号",-1)])]),_:1}),e(h,{type:"info",onClick:T,loading:!1},{default:t(()=>[e(I,{class:Y({"is-loading":k(w).isAccountRefreshing})},{default:t(()=>[e(k(xe))]),_:1},8,["class"]),k(w).isAccountRefreshing?(d(),g("span",xl,"刷新中")):O("",!0)]),_:1})])]),S.value.length>0?(d(),g("div",Tl,[e(ie,{data:S.value,style:{width:"100%"}},{default:t(()=>[e(D,{label:"头像",width:"80"},{default:t(s=>[e(he,{src:se(s.row.name),size:40},null,8,["src"])]),_:1}),e(D,{prop:"name",label:"名称",width:"180"}),e(D,{prop:"platform",label:"平台"},{default:t(s=>[e(B,{type:C(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(D,{prop:"status",label:"状态"},{default:t(s=>[e(B,{type:F(s.row.status),effect:"plain",class:Y({"clickable-status":L(s.row.status)}),onClick:p=>r(s.row)},{default:t(()=>[s.row.status==="验证中"?(d(),Z(I,{key:0,class:Y(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(k(Pe))]),_:1},8,["class"])):O("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(D,{label:"操作"},{default:t(s=>[e(h,{size:"small",onClick:p=>f(s.row)},{default:t(()=>[...o[11]||(o[11]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(h,{size:"small",type:"primary",icon:k(ze),onClick:p=>Q(s.row)},{default:t(()=>[...o[12]||(o[12]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"info",icon:k(ge),onClick:p=>ne(s.row)},{default:t(()=>[...o[13]||(o[13]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"danger",onClick:p=>J(s.row)},{default:t(()=>[...o[14]||(o[14]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(d(),g("div",Ml,[e(ke,{description:"暂无账号数据"})]))])]),_:1}),e(ue,{label:"快手",name:"kuaishou"},{default:t(()=>[l("div",Ul,[l("div",Sl,[e(z,{modelValue:$.value,"onUpdate:modelValue":o[1]||(o[1]=s=>$.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Pl,[e(h,{type:"primary",onClick:V},{default:t(()=>[...o[15]||(o[15]=[u("添加账号",-1)])]),_:1}),e(h,{type:"info",onClick:T,loading:!1},{default:t(()=>[e(I,{class:Y({"is-loading":k(w).isAccountRefreshing})},{default:t(()=>[e(k(xe))]),_:1},8,["class"]),k(w).isAccountRefreshing?(d(),g("span",zl,"刷新中")):O("",!0)]),_:1})])]),P.value.length>0?(d(),g("div",Dl,[e(ie,{data:P.value,style:{width:"100%"}},{default:t(()=>[e(D,{label:"头像",width:"80"},{default:t(s=>[e(he,{src:se(s.row.name),size:40},null,8,["src"])]),_:1}),e(D,{prop:"name",label:"名称",width:"180"}),e(D,{prop:"platform",label:"平台"},{default:t(s=>[e(B,{type:C(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(D,{prop:"status",label:"状态"},{default:t(s=>[e(B,{type:F(s.row.status),effect:"plain",class:Y({"clickable-status":L(s.row.status)}),onClick:p=>r(s.row)},{default:t(()=>[s.row.status==="验证中"?(d(),Z(I,{key:0,class:Y(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(k(Pe))]),_:1},8,["class"])):O("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(D,{label:"操作"},{default:t(s=>[e(h,{size:"small",onClick:p=>f(s.row)},{default:t(()=>[...o[16]||(o[16]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(h,{size:"small",type:"primary",icon:k(ze),onClick:p=>Q(s.row)},{default:t(()=>[...o[17]||(o[17]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"info",icon:k(ge),onClick:p=>ne(s.row)},{default:t(()=>[...o[18]||(o[18]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"danger",onClick:p=>J(s.row)},{default:t(()=>[...o[19]||(o[19]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(d(),g("div",Ll,[e(ke,{description:"暂无快手账号数据"})]))])]),_:1}),e(ue,{label:"抖音",name:"douyin"},{default:t(()=>[l("div",El,[l("div",Fl,[e(z,{modelValue:$.value,"onUpdate:modelValue":o[2]||(o[2]=s=>$.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Rl,[e(h,{type:"primary",onClick:V},{default:t(()=>[...o[20]||(o[20]=[u("添加账号",-1)])]),_:1}),e(h,{type:"info",onClick:T,loading:!1},{default:t(()=>[e(I,{class:Y({"is-loading":k(w).isAccountRefreshing})},{default:t(()=>[e(k(xe))]),_:1},8,["class"]),k(w).isAccountRefreshing?(d(),g("span",Il,"刷新中")):O("",!0)]),_:1})])]),q.value.length>0?(d(),g("div",Bl,[e(ie,{data:q.value,style:{width:"100%"}},{default:t(()=>[e(D,{label:"头像",width:"80"},{default:t(s=>[e(he,{src:se(s.row.name),size:40},null,8,["src"])]),_:1}),e(D,{prop:"name",label:"名称",width:"180"}),e(D,{prop:"platform",label:"平台"},{default:t(s=>[e(B,{type:C(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(D,{prop:"status",label:"状态"},{default:t(s=>[e(B,{type:F(s.row.status),effect:"plain",class:Y({"clickable-status":L(s.row.status)}),onClick:p=>r(s.row)},{default:t(()=>[s.row.status==="验证中"?(d(),Z(I,{key:0,class:Y(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(k(Pe))]),_:1},8,["class"])):O("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(D,{label:"操作"},{default:t(s=>[e(h,{size:"small",onClick:p=>f(s.row)},{default:t(()=>[...o[21]||(o[21]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(h,{size:"small",type:"primary",icon:k(ze),onClick:p=>Q(s.row)},{default:t(()=>[...o[22]||(o[22]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"info",icon:k(ge),onClick:p=>ne(s.row)},{default:t(()=>[...o[23]||(o[23]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"danger",onClick:p=>J(s.row)},{default:t(()=>[...o[24]||(o[24]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(d(),g("div",Ol,[e(ke,{description:"暂无抖音账号数据"})]))])]),_:1}),e(ue,{label:"视频号",name:"channels"},{default:t(()=>[l("div",Nl,[l("div",jl,[e(z,{modelValue:$.value,"onUpdate:modelValue":o[3]||(o[3]=s=>$.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",ql,[e(h,{type:"primary",onClick:V},{default:t(()=>[...o[25]||(o[25]=[u("添加账号",-1)])]),_:1}),e(h,{type:"info",onClick:T,loading:!1},{default:t(()=>[e(I,{class:Y({"is-loading":k(w).isAccountRefreshing})},{default:t(()=>[e(k(xe))]),_:1},8,["class"]),k(w).isAccountRefreshing?(d(),g("span",Jl,"刷新中")):O("",!0)]),_:1})])]),ce.value.length>0?(d(),g("div",Wl,[e(ie,{data:ce.value,style:{width:"100%"}},{default:t(()=>[e(D,{label:"头像",width:"80"},{default:t(s=>[e(he,{src:se(s.row.name),size:40},null,8,["src"])]),_:1}),e(D,{prop:"name",label:"名称",width:"180"}),e(D,{prop:"platform",label:"平台"},{default:t(s=>[e(B,{type:C(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(D,{prop:"status",label:"状态"},{default:t(s=>[e(B,{type:F(s.row.status),effect:"plain",class:Y({"clickable-status":L(s.row.status)}),onClick:p=>r(s.row)},{default:t(()=>[s.row.status==="验证中"?(d(),Z(I,{key:0,class:Y(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(k(Pe))]),_:1},8,["class"])):O("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(D,{label:"操作"},{default:t(s=>[e(h,{size:"small",onClick:p=>f(s.row)},{default:t(()=>[...o[26]||(o[26]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(h,{size:"small",type:"primary",icon:k(ze),onClick:p=>Q(s.row)},{default:t(()=>[...o[27]||(o[27]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"info",icon:k(ge),onClick:p=>ne(s.row)},{default:t(()=>[...o[28]||(o[28]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"danger",onClick:p=>J(s.row)},{default:t(()=>[...o[29]||(o[29]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(d(),g("div",Kl,[e(ke,{description:"暂无视频号账号数据"})]))])]),_:1}),e(ue,{label:"小红书",name:"xiaohongshu"},{default:t(()=>[l("div",Hl,[l("div",Ql,[e(z,{modelValue:$.value,"onUpdate:modelValue":o[4]||(o[4]=s=>$.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Xl,[e(h,{type:"primary",onClick:V},{default:t(()=>[...o[30]||(o[30]=[u("添加账号",-1)])]),_:1}),e(h,{type:"info",onClick:T,loading:!1},{default:t(()=>[e(I,{class:Y({"is-loading":k(w).isAccountRefreshing})},{default:t(()=>[e(k(xe))]),_:1},8,["class"]),k(w).isAccountRefreshing?(d(),g("span",Gl,"刷新中")):O("",!0)]),_:1})])]),K.value.length>0?(d(),g("div",Yl,[e(ie,{data:K.value,style:{width:"100%"}},{default:t(()=>[e(D,{label:"头像",width:"80"},{default:t(s=>[e(he,{src:se(s.row.name),size:40},null,8,["src"])]),_:1}),e(D,{prop:"name",label:"名称",width:"180"}),e(D,{prop:"platform",label:"平台"},{default:t(s=>[e(B,{type:C(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(D,{prop:"status",label:"状态"},{default:t(s=>[e(B,{type:F(s.row.status),effect:"plain",class:Y({"clickable-status":L(s.row.status)}),onClick:p=>r(s.row)},{default:t(()=>[s.row.status==="验证中"?(d(),Z(I,{key:0,class:Y(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(k(Pe))]),_:1},8,["class"])):O("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(D,{label:"操作"},{default:t(s=>[e(h,{size:"small",onClick:p=>f(s.row)},{default:t(()=>[...o[31]||(o[31]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(h,{size:"small",type:"primary",icon:k(ze),onClick:p=>Q(s.row)},{default:t(()=>[...o[32]||(o[32]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"info",icon:k(ge),onClick:p=>ne(s.row)},{default:t(()=>[...o[33]||(o[33]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(h,{size:"small",type:"danger",onClick:p=>J(s.row)},{default:t(()=>[...o[34]||(o[34]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(d(),g("div",Zl,[e(ke,{description:"暂无小红书账号数据"})]))])]),_:1})]),_:1},8,["modelValue"])]),e(a,{modelValue:G.value,"onUpdate:modelValue":o[9]||(o[9]=s=>G.value=s),title:E.value==="add"?"添加账号":"编辑账号",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!N.value,"show-close":!N.value},{footer:t(()=>[l("span",ns,[e(h,{onClick:o[8]||(o[8]=s=>G.value=!1)},{default:t(()=>[...o[39]||(o[39]=[u("取消",-1)])]),_:1}),e(h,{type:"primary",onClick:Ve,loading:N.value,disabled:N.value},{default:t(()=>[u(A(N.value?"请求中":"确认"),1)]),_:1},8,["loading","disabled"])])]),default:t(()=>[e(n,{model:j,"label-width":"80px",rules:te,ref_key:"accountFormRef",ref:ye},{default:t(()=>[e(Ee,{label:"平台",prop:"platform"},{default:t(()=>[e(Fe,{modelValue:j.platform,"onUpdate:modelValue":o[6]||(o[6]=s=>j.platform=s),placeholder:"请选择平台",style:{width:"100%"},disabled:E.value==="edit"||N.value},{default:t(()=>[e(be,{label:"快手",value:"快手"}),e(be,{label:"抖音",value:"抖音"}),e(be,{label:"视频号",value:"视频号"}),e(be,{label:"小红书",value:"小红书"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(Ee,{label:"名称",prop:"name"},{default:t(()=>[e(z,{modelValue:j.name,"onUpdate:modelValue":o[7]||(o[7]=s=>j.name=s),placeholder:"请输入账号名称",disabled:N.value},null,8,["modelValue","disabled"])]),_:1}),N.value?(d(),g("div",es,[le.value&&!oe.value?(d(),g("div",ts,[o[35]||(o[35]=l("p",{class:"qrcode-tip"},"请使用对应平台APP扫描二维码登录",-1)),l("img",{src:le.value,alt:"登录二维码",class:"qrcode-image"},null,8,ls)])):!le.value&&!oe.value?(d(),g("div",ss,[e(I,{class:"is-loading"},{default:t(()=>[e(k(xe))]),_:1}),o[36]||(o[36]=l("span",null,"请求中...",-1))])):oe.value==="200"?(d(),g("div",as,[e(I,null,{default:t(()=>[e(k(Vt))]),_:1}),o[37]||(o[37]=l("span",null,"添加成功",-1))])):oe.value==="500"?(d(),g("div",os,[e(I,null,{default:t(()=>[e(k(At))]),_:1}),o[38]||(o[38]=l("span",null,"添加失败，请稍后再试",-1))])):O("",!0)])):O("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title","close-on-press-escape","show-close"])])}}},us=Se(is,[["__scopeId","data-v-b3b9d2cb"]]),ds={class:"material-management"},rs={class:"material-list-container"},cs={class:"material-search"},ps={class:"action-buttons"},fs={key:0},ms={key:0,class:"material-list"},vs={key:1,class:"empty-data"},_s={class:"upload-form"},gs={class:"upload-file-list"},ys={class:"file-name"},hs={class:"dialog-footer"},ks={key:0,class:"preview-container"},bs={key:0,class:"video-preview"},ws={controls:"",style:{"max-width":"100%","max-height":"60vh"}},$s=["src"],Cs={key:1,class:"image-preview"},Vs=["src"],As={key:2,class:"file-info"},xs={__name:"MaterialManagement",setup(_){const y=je(),w=M(""),x=M(!1),$=M(!1),R=M(!1),T=M(!1),U=M(null),C=M([]),L=M(""),F=_e(()=>C.value.length>1),r=M({});rt(C,V=>{V.length<=1});const S=async()=>{x.value=!0;try{const V=await $e.getAllMaterials();V.code===200?(y.setMaterials(V.data),m.success("刷新成功")):m.error("获取素材列表失败")}catch(V){console.error("获取素材列表出错:",V),m.error("获取素材列表失败")}finally{x.value=!1}},P=_e(()=>{if(!w.value)return y.materials;const V=w.value.toLowerCase();return y.materials.filter(f=>f.filename.toLowerCase().includes(V))}),q=()=>{},ce=()=>{C.value=[],L.value="",r.value={},R.value=!0},K=()=>{C.value=[],L.value="",r.value={}},H=(V,f)=>{C.value=f;const J={};for(const Q of f)J[Q.uid]={percentage:0,speed:""};r.value=J},G=(V,f)=>{C.value=f;const J={...r.value};delete J[V.uid],r.value=J},E=async()=>{if(C.value.length===0){m.warning("请选择要上传的文件");return}$.value=!0;for(const V of C.value)try{if(!V||!V.raw){m.warning(`文件 ${V.name} 对象无效，已跳过`);continue}const f=new FormData;f.append("file",V.raw),C.value.length===1&&L.value.trim()&&f.append("filename",L.value.trim());let J=0,Q=Date.now();const ne=await $e.uploadMaterial(f,ee=>{const se=r.value[V.uid];if(!se)return;const pe=Math.round(ee.loaded*100/ee.total);se.percentage=pe;const ae=Date.now(),we=(ae-Q)/1e3,Ve=ee.loaded-J;if(we>.5){const c=Ve/we;c>1024*1024?se.speed=(c/(1024*1024)).toFixed(2)+" MB/s":se.speed=(c/1024).toFixed(2)+" KB/s",J=ee.loaded,Q=ae}});if(ne.code===200){m.success(`文件 ${V.name} 上传成功`);const ee=r.value[V.uid];ee&&(ee.speed="完成")}else m.error(`文件 ${V.name} 上传失败: ${ne.msg||"未知错误"}`)}catch(f){console.error(`上传文件 ${V.name} 出错:`,f),m.error(`文件 ${V.name} 上传失败: ${f.message||"未知错误"}`)}$.value=!1,await S()},ye=async V=>{U.value=null,T.value=!0,m.info("加载中...");try{await new Promise(f=>setTimeout(f,100)),U.value=V}catch(f){console.error("预览素材出错:",f),m.error("预览加载失败"),T.value=!1}},j=V=>{Ge.confirm(`确定要删除素材 ${V.filename} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const f=await $e.deleteMaterial(V.id);f.code===200?(y.removeMaterial(V.id),m.success("删除成功")):m.error(f.msg||"删除失败")}catch(f){console.error("删除素材出错:",f),m.error("删除失败")}}).catch(()=>{})},te=V=>{const f=V.split("/").pop();return $e.getMaterialPreviewUrl(f)},N=V=>{const f=$e.downloadMaterial(V.file_path);window.open(f,"_blank")},le=V=>[".mp4",".avi",".mov",".wmv",".flv",".mkv"].some(J=>V.toLowerCase().endsWith(J)),oe=V=>[".jpg",".jpeg",".png",".gif",".bmp",".webp"].some(J=>V.toLowerCase().endsWith(J));return Ne(()=>{y.materials.length===0&&S()}),(V,f)=>{const J=v("el-input"),Q=v("el-button"),ne=v("el-icon"),ee=v("el-table-column"),se=v("el-table"),pe=v("el-empty"),ae=v("el-form-item"),we=v("el-upload"),Ve=v("el-progress"),c=v("el-form"),o=v("el-dialog");return d(),g("div",ds,[f[14]||(f[14]=l("div",{class:"page-header"},[l("h1",null,"素材管理")],-1)),l("div",rs,[l("div",cs,[e(J,{modelValue:w.value,"onUpdate:modelValue":f[0]||(f[0]=z=>w.value=z),placeholder:"输入文件名搜索","prefix-icon":"Search",clearable:"",onClear:q,onInput:q},null,8,["modelValue"]),l("div",ps,[e(Q,{type:"primary",onClick:ce},{default:t(()=>[...f[6]||(f[6]=[u("上传素材",-1)])]),_:1}),e(Q,{type:"info",onClick:S,loading:!1},{default:t(()=>[e(ne,{class:Y({"is-loading":x.value})},{default:t(()=>[e(k(xe))]),_:1},8,["class"]),x.value?(d(),g("span",fs,"刷新中")):O("",!0)]),_:1})])]),P.value.length>0?(d(),g("div",ms,[e(se,{data:P.value,style:{width:"100%"}},{default:t(()=>[e(ee,{prop:"uuid",label:"UUID",width:"180"}),e(ee,{prop:"filename",label:"文件名",width:"300"}),e(ee,{prop:"filesize",label:"文件大小",width:"120"},{default:t(z=>[u(A(z.row.filesize)+" MB ",1)]),_:1}),e(ee,{prop:"upload_time",label:"上传时间",width:"180"}),e(ee,{label:"操作"},{default:t(z=>[e(Q,{size:"small",onClick:h=>ye(z.row)},{default:t(()=>[...f[7]||(f[7]=[u("预览",-1)])]),_:1},8,["onClick"]),e(Q,{size:"small",type:"danger",onClick:h=>j(z.row)},{default:t(()=>[...f[8]||(f[8]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(d(),g("div",vs,[e(pe,{description:"暂无素材数据"})]))]),e(o,{modelValue:R.value,"onUpdate:modelValue":f[3]||(f[3]=z=>R.value=z),title:"上传素材",width:"40%",onClose:K},{footer:t(()=>[l("div",hs,[e(Q,{onClick:f[2]||(f[2]=z=>R.value=!1)},{default:t(()=>[...f[11]||(f[11]=[u("取消",-1)])]),_:1}),e(Q,{type:"primary",onClick:E,loading:$.value},{default:t(()=>[u(A($.value?"上传中":"确认上传"),1)]),_:1},8,["loading"])])]),default:t(()=>[l("div",_s,[e(c,{"label-width":"80px"},{default:t(()=>[e(ae,{label:"文件名称:"},{default:t(()=>[e(J,{modelValue:L.value,"onUpdate:modelValue":f[1]||(f[1]=z=>L.value=z),placeholder:"选填 (仅单个文件时生效)",disabled:F.value,clearable:""},null,8,["modelValue","disabled"])]),_:1}),e(ae,{label:"选择文件"},{default:t(()=>[e(we,{class:"upload-demo",drag:"",multiple:"","auto-upload":!1,"on-change":H,"on-remove":G,"file-list":C.value},{tip:t(()=>[...f[9]||(f[9]=[l("div",{class:"el-upload__tip"}," 支持视频、图片等格式文件，可一次选择多个文件 ",-1)])]),default:t(()=>[e(ne,{class:"el-icon--upload"},{default:t(()=>[e(k(ge))]),_:1}),f[10]||(f[10]=l("div",{class:"el-upload__text"},[u(" 将文件拖到此处，或"),l("em",null,"点击上传")],-1))]),_:1},8,["file-list"])]),_:1}),C.value.length>0?(d(),Z(ae,{key:0,label:"上传列表"},{default:t(()=>[l("div",gs,[(d(!0),g(de,null,re(C.value,z=>{var h;return d(),g("div",{key:z.uid,class:"upload-file-item"},[l("span",ys,A(z.name),1),e(Ve,{percentage:((h=r.value[z.uid])==null?void 0:h.percentage)||0,"text-inside":!0,"stroke-width":20,style:{width:"100%","margin-top":"5px"}},{default:t(()=>{var I;return[l("span",null,A(((I=r.value[z.uid])==null?void 0:I.speed)||""),1)]}),_:2},1032,["percentage"])])}),128))])]),_:1})):O("",!0)]),_:1})])]),_:1},8,["modelValue"]),e(o,{modelValue:T.value,"onUpdate:modelValue":f[5]||(f[5]=z=>T.value=z),title:"素材预览",width:"50%",top:"10vh"},{default:t(()=>[U.value?(d(),g("div",ks,[le(U.value.filename)?(d(),g("div",bs,[l("video",ws,[l("source",{src:te(U.value.file_path),type:"video/mp4"},null,8,$s),f[12]||(f[12]=u(" 您的浏览器不支持视频播放 ",-1))])])):oe(U.value.filename)?(d(),g("div",Cs,[l("img",{src:te(U.value.file_path),style:{"max-width":"100%","max-height":"60vh"}},null,8,Vs)])):(d(),g("div",As,[l("p",null,"文件名: "+A(U.value.filename),1),l("p",null,"文件大小: "+A(U.value.filesize)+" MB",1),l("p",null,"上传时间: "+A(U.value.upload_time),1),e(Q,{type:"primary",onClick:f[4]||(f[4]=z=>N(U.value))},{default:t(()=>[...f[13]||(f[13]=[u("下载文件",-1)])]),_:1})]))])):O("",!0)]),_:1},8,["modelValue"])])}}},Ts=Se(xs,[["__scopeId","data-v-3ba12618"]]),Ms={class:"publish-center"},Us={class:"tab-management"},Ss={class:"tab-header"},Ps={class:"tab-list"},zs=["onClick"],Ds={class:"tab-actions"},Ls={class:"publish-content"},Es={class:"tab-content-wrapper"},Fs={key:0,class:"publish-status"},Rs={class:"upload-section"},Is={class:"upload-options"},Bs={key:0,class:"uploaded-files"},Os={class:"file-list"},Ns={class:"file-size"},js={class:"upload-options-content"},qs={class:"publish-progress"},Js={key:0,class:"current-publishing"},Ws={key:1,class:"publish-results"},Ks={class:"label"},Hs={class:"message"},Qs={class:"dialog-footer"},Xs={class:"material-library-content"},Gs={class:"material-list"},Ys={class:"material-info"},Zs={class:"material-name"},ea={class:"material-details"},ta={class:"file-size"},la={class:"upload-time"},sa={class:"dialog-footer"},aa={class:"account-section"},oa={class:"account-display"},na={class:"selected-accounts"},ia={class:"account-dialog-content"},ua={class:"account-list"},da={class:"account-info"},ra={class:"account-name"},ca={class:"dialog-footer"},pa={class:"platform-section"},fa={key:1,class:"draft-section"},ma={key:2,class:"product-section"},va={class:"title-section"},_a={class:"topic-section"},ga={class:"topic-display"},ya={class:"selected-topics"},ha={class:"topic-dialog-content"},ka={class:"custom-topic-input"},ba={class:"recommended-topics"},wa={class:"topic-grid"},$a={class:"dialog-footer"},Ca={key:3,class:"product-section"},Va={class:"schedule-section"},Aa={class:"schedule-controls"},xa={key:0,class:"schedule-settings"},Ta={class:"schedule-item"},Ma={class:"schedule-item"},Ua={class:"schedule-item"},Sa={class:"action-buttons"},Pa={__name:"PublishCenter",setup(_){const y="http://localhost:5409",w=_e(()=>({Authorization:`Bearer ${localStorage.getItem("token")||""}`})),x=M("tab1");let $=1;const R=je(),T=M(!1),U=M(!1),C=M(!1),L=M(null),F=M([]),r=_e(()=>R.materials),S=M(!1);M(""),M("info");const P=[{key:3,name:"抖音"},{key:4,name:"快手"},{key:2,name:"视频号"},{key:1,name:"小红书"}],q={name:"tab1",label:"发布1",fileList:[],displayFileList:[],selectedAccounts:[],selectedPlatform:1,title:"",productLink:"",productTitle:"",selectedTopics:[],scheduleEnabled:!1,videosPerDay:1,dailyTimes:["10:00"],startDays:0,publishStatus:null,publishing:!1,isDraft:!1},ce=()=>{try{return typeof structuredClone=="function"?structuredClone(q):JSON.parse(JSON.stringify(q))}catch{return JSON.parse(JSON.stringify(q))}},K=De([ce()]),H=M(!1),G=M([]),E=M(null),ye=Ye(),j=_e(()=>{const n={3:"抖音",2:"视频号",1:"小红书",4:"快手"},a=E.value?n[E.value.selectedPlatform]:null;return a?ye.accounts.filter(s=>s.platform===a):[]}),te=M(!1),N=M(""),le=["游戏","电影","音乐","美食","旅行","文化","科技","生活","娱乐","体育","教育","艺术","健康","时尚","美妆","摄影","宠物","汽车"],oe=()=>{$++;const n=ce();n.name=`tab${$}`,n.label=`发布${$}`,K.push(n),x.value=n.name},V=n=>{const a=K.findIndex(s=>s.name===n);a>-1&&(K.splice(a,1),x.value===n&&K.length>0&&(x.value=K[0].name))},f=(n,a,s)=>{if(n.code===200){const p=n.data.path||n.data,W=p.split("/").pop(),me={name:a.name,url:$e.getMaterialPreviewUrl(W),path:p,size:a.size,type:a.type};s.fileList.push(me),s.displayFileList=[...s.fileList.map(ve=>({name:ve.name,url:ve.url}))],m.success("文件上传成功"),console.log("上传成功:",me)}else m.error(n.msg||"上传失败")},J=n=>{m.error("文件上传失败"),console.error("上传错误:",n)},Q=(n,a)=>{n.fileList.splice(a,1),n.displayFileList=[...n.fileList.map(s=>({name:s.name,url:s.url}))],m.success("文件删除成功")},ne=n=>{E.value=n,te.value=!0},ee=()=>{if(!N.value.trim()){m.warning("请输入话题内容");return}E.value&&!E.value.selectedTopics.includes(N.value.trim())?(E.value.selectedTopics.push(N.value.trim()),N.value="",m.success("话题添加成功")):m.warning("话题已存在")},se=n=>{if(!E.value)return;const a=E.value.selectedTopics.indexOf(n);a>-1?E.value.selectedTopics.splice(a,1):E.value.selectedTopics.push(n)},pe=(n,a)=>{n.selectedTopics.splice(a,1)},ae=()=>{te.value=!1,N.value="",E.value=null,m.success("添加话题完成")},we=n=>{E.value=n,G.value=[...n.selectedAccounts],H.value=!0},Ve=()=>{E.value&&(E.value.selectedAccounts=[...G.value]),H.value=!1,E.value=null,m.success("账号选择完成")},c=(n,a)=>{n.selectedAccounts.splice(a,1)},o=n=>{const a=ye.accounts.find(s=>s.id===n);return a?a.name:n},z=n=>{m.info("已取消发布")},h=async n=>n.publishing?Promise.reject(new Error("正在发布中，请稍候...")):(n.publishing=!0,new Promise((a,s)=>{if(n.fileList.length===0){m.error("请先上传视频文件"),n.publishing=!1,s(new Error("请先上传视频文件"));return}if(!n.title.trim()){m.error("请输入标题"),n.publishing=!1,s(new Error("请输入标题"));return}if(!n.selectedPlatform){m.error("请选择发布平台"),n.publishing=!1,s(new Error("请选择发布平台"));return}if(n.selectedAccounts.length===0){m.error("请选择发布账号"),n.publishing=!1,s(new Error("请选择发布账号"));return}const p={type:n.selectedPlatform,title:n.title,tags:n.selectedTopics,fileList:n.fileList.map(W=>W.path),accountList:n.selectedAccounts.map(W=>{const me=ye.accounts.find(ve=>ve.id===W);return me?me.filePath:W}),enableTimer:n.scheduleEnabled?1:0,videosPerDay:n.scheduleEnabled&&n.videosPerDay||1,dailyTimes:n.scheduleEnabled?n.dailyTimes||["10:00"]:["10:00"],startDays:n.scheduleEnabled&&n.startDays||0,category:0,productLink:n.productLink.trim()||"",productTitle:n.productTitle.trim()||"",isDraft:n.isDraft};fetch(`${y}/postVideo`,{method:"POST",headers:{"Content-Type":"application/json",...w.value},body:JSON.stringify(p)}).then(W=>W.json()).then(W=>{W.code===200?(n.publishStatus={message:"发布成功",type:"success"},n.fileList=[],n.displayFileList=[],n.title="",n.selectedTopics=[],n.selectedAccounts=[],n.scheduleEnabled=!1,a()):(n.publishStatus={message:`发布失败：${W.msg||"发布失败"}`,type:"error"},s(new Error(W.msg||"发布失败")))}).catch(W=>{console.error("发布错误:",W),n.publishStatus={message:"发布失败，请检查网络连接",type:"error"},s(W)}).finally(()=>{n.publishing=!1})})),I=n=>{L.value=n,T.value=!0},he=()=>{T.value=!1,U.value=!0},D=async()=>{if(T.value=!1,r.value.length===0)try{const n=await $e.getAllMaterials();if(n.code===200)R.setMaterials(n.data);else{m.error("获取素材列表失败");return}}catch(n){console.error("获取素材列表出错:",n),m.error("获取素材列表失败");return}F.value=[],C.value=!0},B=()=>{if(F.value.length===0){m.warning("请选择至少一个素材");return}L.value&&(F.value.forEach(a=>{const s=r.value.find(p=>p.id===a);if(s){const p={name:s.filename,url:$e.getMaterialPreviewUrl(s.file_path.split("/").pop()),path:s.file_path,size:s.filesize*1024*1024,type:"video/mp4"};L.value.fileList.some(me=>me.path===p.path)||L.value.fileList.push(p)}}),L.value.displayFileList=[...L.value.fileList.map(a=>({name:a.name,url:a.url}))]);const n=F.value.length;C.value=!1,F.value=[],L.value=null,m.success(`已添加 ${n} 个素材`)},ie=M(!1),ke=M(null),ue=M(0),fe=M([]),be=M(!1),Fe=()=>{be.value=!0,m.info("正在取消发布...")},Ee=async()=>{if(!S.value){S.value=!0,ke.value=null,ue.value=0,fe.value=[],be.value=!1,ie.value=!0;try{for(let p=0;p<K.length;p++){if(be.value){fe.value.push({label:K[p].label,status:"cancelled",message:"已取消"});continue}const W=K[p];ke.value=W,ue.value=Math.floor(p/K.length*100);try{await h(W),fe.value.push({label:W.label,status:"success",message:"发布成功"})}catch(me){fe.value.push({label:W.label,status:"error",message:me.message})}}ue.value=100;const n=fe.value.filter(p=>p.status==="success").length,a=fe.value.filter(p=>p.status==="error").length,s=fe.value.filter(p=>p.status==="cancelled").length;be.value?m.warning(`发布已取消：${n}个成功，${a}个失败，${s}个未执行`):a>0?m.error(`发布完成：${n}个成功，${a}个失败`):(m.success("所有Tab发布成功"),setTimeout(()=>{ie.value=!1},1e3))}catch(n){console.error("批量发布出错:",n),m.error("批量发布出错，请重试")}finally{S.value=!1,be.value=!1}}};return(n,a)=>{const s=v("el-icon"),p=v("el-button"),W=v("el-alert"),me=v("el-link"),ve=v("el-dialog"),Ze=v("el-upload"),et=v("el-progress"),tt=v("Check"),lt=v("InfoFilled"),Re=v("el-checkbox"),qe=v("el-checkbox-group"),Je=v("el-tag"),st=v("el-radio"),at=v("el-radio-group"),Me=v("el-input"),ot=v("el-switch"),Ie=v("el-option"),We=v("el-select"),nt=v("el-time-select");return d(),g("div",Ms,[l("div",Us,[l("div",Ss,[l("div",Ps,[(d(!0),g(de,null,re(K,b=>(d(),g("div",{key:b.name,class:Y(["tab-item",{active:x.value===b.name}]),onClick:i=>x.value=b.name},[l("span",null,A(b.label),1),K.length>1?(d(),Z(s,{key:0,class:"close-icon",onClick:ct(i=>V(b.name),["stop"])},{default:t(()=>[e(k(Ke))]),_:1},8,["onClick"])):O("",!0)],10,zs))),128))]),l("div",Ds,[e(p,{type:"primary",size:"small",onClick:oe,class:"add-tab-btn"},{default:t(()=>[e(s,null,{default:t(()=>[e(k(xt))]),_:1}),a[13]||(a[13]=u(" 添加Tab ",-1))]),_:1}),e(p,{type:"success",size:"small",onClick:Ee,loading:S.value,class:"batch-publish-btn"},{default:t(()=>[...a[14]||(a[14]=[u(" 批量发布 ",-1)])]),_:1},8,["loading"])])])]),l("div",Ls,[l("div",Es,[(d(!0),g(de,null,re(K,b=>Be((d(),g("div",{key:b.name,class:"tab-content"},[b.publishStatus?(d(),g("div",Fs,[e(W,{title:b.publishStatus.message,type:b.publishStatus.type,closable:!1,"show-icon":""},null,8,["title","type"])])):O("",!0),l("div",Rs,[a[18]||(a[18]=l("h3",null,"视频",-1)),l("div",Is,[e(p,{type:"primary",onClick:i=>I(b),class:"upload-btn"},{default:t(()=>[e(s,null,{default:t(()=>[e(k(ge))]),_:1}),a[15]||(a[15]=u(" 上传视频 ",-1))]),_:1},8,["onClick"])]),b.fileList.length>0?(d(),g("div",Bs,[a[17]||(a[17]=l("h4",null,"已上传文件：",-1)),l("div",Os,[(d(!0),g(de,null,re(b.fileList,(i,X)=>(d(),g("div",{key:X,class:"file-item"},[e(me,{href:i.url,target:"_blank",type:"primary"},{default:t(()=>[u(A(i.name),1)]),_:2},1032,["href"]),l("span",Ns,A((i.size/1024/1024).toFixed(2))+"MB",1),e(p,{type:"danger",size:"small",onClick:Ae=>Q(b,X)},{default:t(()=>[...a[16]||(a[16]=[u("删除",-1)])]),_:1},8,["onClick"])]))),128))])])):O("",!0)]),e(ve,{modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=i=>T.value=i),title:"选择上传方式",width:"400px",class:"upload-options-dialog"},{default:t(()=>[l("div",js,[e(p,{type:"primary",onClick:he,class:"option-btn"},{default:t(()=>[e(s,null,{default:t(()=>[e(k(ge))]),_:1}),a[19]||(a[19]=u(" 本地上传 ",-1))]),_:1}),e(p,{type:"success",onClick:D,class:"option-btn"},{default:t(()=>[e(s,null,{default:t(()=>[e(k(Tt))]),_:1}),a[20]||(a[20]=u(" 素材库 ",-1))]),_:1})])]),_:1},8,["modelValue"]),e(ve,{modelValue:U.value,"onUpdate:modelValue":a[1]||(a[1]=i=>U.value=i),title:"本地上传",width:"600px",class:"local-upload-dialog"},{default:t(()=>[e(Ze,{class:"video-upload",drag:"","auto-upload":!0,action:`${k(y)}/upload`,"on-success":(i,X)=>f(i,X,L.value),"on-error":J,multiple:"",accept:"video/*",headers:w.value},{tip:t(()=>[...a[21]||(a[21]=[l("div",{class:"el-upload__tip"}," 支持MP4、AVI等视频格式，可上传多个文件 ",-1)])]),default:t(()=>[e(s,{class:"el-icon--upload"},{default:t(()=>[e(k(ge))]),_:1}),a[22]||(a[22]=l("div",{class:"el-upload__text"},[u(" 将视频文件拖到此处，或"),l("em",null,"点击上传")],-1))]),_:1},8,["action","on-success","headers"])]),_:1},8,["modelValue"]),e(ve,{modelValue:ie.value,"onUpdate:modelValue":a[3]||(a[3]=i=>ie.value=i),title:"批量发布进度",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:t(()=>[l("div",Qs,[e(p,{onClick:Fe,disabled:ue.value===100},{default:t(()=>[...a[23]||(a[23]=[u(" 取消发布 ",-1)])]),_:1},8,["disabled"]),ue.value===100?(d(),Z(p,{key:0,type:"primary",onClick:a[2]||(a[2]=i=>ie.value=!1)},{default:t(()=>[...a[24]||(a[24]=[u(" 关闭 ",-1)])]),_:1})):O("",!0)])]),default:t(()=>[l("div",qs,[e(et,{percentage:ue.value,status:ue.value===100?"success":""},null,8,["percentage","status"]),ke.value?(d(),g("div",Js," 正在发布："+A(ke.value.label),1)):O("",!0),fe.value.length>0?(d(),g("div",Ws,[(d(!0),g(de,null,re(fe.value,(i,X)=>(d(),g("div",{key:X,class:Y(["result-item",i.status])},[i.status==="success"?(d(),Z(s,{key:0},{default:t(()=>[e(tt)]),_:1})):i.status==="error"?(d(),Z(s,{key:1},{default:t(()=>[e(k(Ke))]),_:1})):(d(),Z(s,{key:2},{default:t(()=>[e(lt)]),_:1})),l("span",Ks,A(i.label),1),l("span",Hs,A(i.message),1)],2))),128))])):O("",!0)])]),_:1},8,["modelValue"]),e(ve,{modelValue:C.value,"onUpdate:modelValue":a[6]||(a[6]=i=>C.value=i),title:"选择素材",width:"800px",class:"material-library-dialog"},{footer:t(()=>[l("div",sa,[e(p,{onClick:a[5]||(a[5]=i=>C.value=!1)},{default:t(()=>[...a[25]||(a[25]=[u("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:B},{default:t(()=>[...a[26]||(a[26]=[u("确定",-1)])]),_:1})])]),default:t(()=>[l("div",Xs,[e(qe,{modelValue:F.value,"onUpdate:modelValue":a[4]||(a[4]=i=>F.value=i)},{default:t(()=>[l("div",Gs,[(d(!0),g(de,null,re(r.value,i=>(d(),g("div",{key:i.id,class:"material-item"},[e(Re,{label:i.id,class:"material-checkbox"},{default:t(()=>[l("div",Ys,[l("div",Zs,A(i.filename),1),l("div",ea,[l("span",ta,A(i.filesize)+"MB",1),l("span",la,A(i.upload_time),1)])])]),_:2},1032,["label"])]))),128))])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]),l("div",aa,[a[28]||(a[28]=l("h3",null,"账号",-1)),l("div",oa,[l("div",na,[(d(!0),g(de,null,re(b.selectedAccounts,(i,X)=>(d(),Z(Je,{key:X,closable:"",onClose:Ae=>c(b,X),class:"account-tag"},{default:t(()=>[u(A(o(i)),1)]),_:2},1032,["onClose"]))),128))]),e(p,{type:"primary",plain:"",onClick:i=>we(b),class:"select-account-btn"},{default:t(()=>[...a[27]||(a[27]=[u(" 选择账号 ",-1)])]),_:1},8,["onClick"])])]),e(ve,{modelValue:H.value,"onUpdate:modelValue":a[9]||(a[9]=i=>H.value=i),title:"选择账号",width:"600px",class:"account-dialog"},{footer:t(()=>[l("div",ca,[e(p,{onClick:a[8]||(a[8]=i=>H.value=!1)},{default:t(()=>[...a[29]||(a[29]=[u("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:Ve},{default:t(()=>[...a[30]||(a[30]=[u("确定",-1)])]),_:1})])]),default:t(()=>[l("div",ia,[e(qe,{modelValue:G.value,"onUpdate:modelValue":a[7]||(a[7]=i=>G.value=i)},{default:t(()=>[l("div",ua,[(d(!0),g(de,null,re(j.value,i=>(d(),Z(Re,{key:i.id,label:i.id,class:"account-item"},{default:t(()=>[l("div",da,[l("span",ra,A(i.name),1)])]),_:2},1032,["label"]))),128))])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]),l("div",pa,[a[31]||(a[31]=l("h3",null,"平台",-1)),e(at,{modelValue:b.selectedPlatform,"onUpdate:modelValue":i=>b.selectedPlatform=i,class:"platform-radios"},{default:t(()=>[(d(),g(de,null,re(P,i=>e(st,{key:i.key,label:i.key,class:"platform-radio"},{default:t(()=>[u(A(i.name),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])]),b.selectedPlatform===2?(d(),g("div",fa,[e(Re,{modelValue:b.isDraft,"onUpdate:modelValue":i=>b.isDraft=i,label:"视频号仅保存草稿(用手机发布)",class:"draft-checkbox"},null,8,["modelValue","onUpdate:modelValue"])])):O("",!0),b.selectedPlatform===3?(d(),g("div",ma,[a[32]||(a[32]=l("h3",null,"商品链接",-1)),e(Me,{modelValue:b.productTitle,"onUpdate:modelValue":i=>b.productTitle=i,type:"text",rows:1,placeholder:"请输入商品名称",maxlength:"200",class:"product-name-input"},null,8,["modelValue","onUpdate:modelValue"]),e(Me,{modelValue:b.productLink,"onUpdate:modelValue":i=>b.productLink=i,type:"text",rows:1,placeholder:"请输入商品链接",maxlength:"200",class:"product-link-input"},null,8,["modelValue","onUpdate:modelValue"])])):O("",!0),l("div",va,[a[33]||(a[33]=l("h3",null,"标题",-1)),e(Me,{modelValue:b.title,"onUpdate:modelValue":i=>b.title=i,type:"textarea",rows:3,placeholder:"请输入标题",maxlength:"100","show-word-limit":"",class:"title-input"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",_a,[a[35]||(a[35]=l("h3",null,"话题",-1)),l("div",ga,[l("div",ya,[(d(!0),g(de,null,re(b.selectedTopics,(i,X)=>(d(),Z(Je,{key:X,closable:"",onClose:Ae=>pe(b,X),class:"topic-tag"},{default:t(()=>[u(" #"+A(i),1)]),_:2},1032,["onClose"]))),128))]),e(p,{type:"primary",plain:"",onClick:i=>ne(b),class:"select-topic-btn"},{default:t(()=>[...a[34]||(a[34]=[u(" 添加话题 ",-1)])]),_:1},8,["onClick"])])]),e(ve,{modelValue:te.value,"onUpdate:modelValue":a[12]||(a[12]=i=>te.value=i),title:"添加话题",width:"600px",class:"topic-dialog"},{footer:t(()=>[l("div",$a,[e(p,{onClick:a[11]||(a[11]=i=>te.value=!1)},{default:t(()=>[...a[39]||(a[39]=[u("取消",-1)])]),_:1}),e(p,{type:"primary",onClick:ae},{default:t(()=>[...a[40]||(a[40]=[u("确定",-1)])]),_:1})])]),default:t(()=>[l("div",ha,[l("div",ka,[e(Me,{modelValue:N.value,"onUpdate:modelValue":a[10]||(a[10]=i=>N.value=i),placeholder:"输入自定义话题",class:"custom-input"},{prepend:t(()=>[...a[36]||(a[36]=[u("#",-1)])]),_:1},8,["modelValue"]),e(p,{type:"primary",onClick:ee},{default:t(()=>[...a[37]||(a[37]=[u("添加",-1)])]),_:1})]),l("div",ba,[a[38]||(a[38]=l("h4",null,"推荐话题",-1)),l("div",wa,[(d(),g(de,null,re(le,i=>{var X,Ae;return e(p,{key:i,type:(Ae=(X=E.value)==null?void 0:X.selectedTopics)!=null&&Ae.includes(i)?"primary":"default",onClick:Ba=>se(i),class:"topic-btn"},{default:t(()=>[u(A(i),1)]),_:2},1032,["type","onClick"])}),64))])])])]),_:1},8,["modelValue"]),b.selectedPlatform===3?(d(),g("div",Ca,[a[41]||(a[41]=l("h3",null,"商品链接",-1)),e(Me,{modelValue:b.productTitle,"onUpdate:modelValue":i=>b.productTitle=i,type:"text",rows:1,placeholder:"请输入商品名称",maxlength:"200",class:"product-name-input"},null,8,["modelValue","onUpdate:modelValue"]),e(Me,{modelValue:b.productLink,"onUpdate:modelValue":i=>b.productLink=i,type:"text",rows:1,placeholder:"请输入商品链接",maxlength:"200",class:"product-link-input"},null,8,["modelValue","onUpdate:modelValue"])])):O("",!0),l("div",Va,[a[46]||(a[46]=l("h3",null,"定时发布",-1)),l("div",Aa,[e(ot,{modelValue:b.scheduleEnabled,"onUpdate:modelValue":i=>b.scheduleEnabled=i,"active-text":"定时发布","inactive-text":"立即发布"},null,8,["modelValue","onUpdate:modelValue"]),b.scheduleEnabled?(d(),g("div",xa,[l("div",Ta,[a[42]||(a[42]=l("span",{class:"label"},"每天发布视频数：",-1)),e(We,{modelValue:b.videosPerDay,"onUpdate:modelValue":i=>b.videosPerDay=i,placeholder:"选择发布数量"},{default:t(()=>[(d(),g(de,null,re(55,i=>e(Ie,{key:i,label:i,value:i},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])]),l("div",Ma,[a[44]||(a[44]=l("span",{class:"label"},"每天发布时间：",-1)),(d(!0),g(de,null,re(b.dailyTimes,(i,X)=>(d(),Z(nt,{key:X,modelValue:b.dailyTimes[X],"onUpdate:modelValue":Ae=>b.dailyTimes[X]=Ae,start:"00:00",step:"00:30",end:"23:30",placeholder:"选择时间"},null,8,["modelValue","onUpdate:modelValue"]))),128)),b.dailyTimes.length<b.videosPerDay?(d(),Z(p,{key:0,type:"primary",size:"small",onClick:i=>b.dailyTimes.push("10:00")},{default:t(()=>[...a[43]||(a[43]=[u(" 添加时间 ",-1)])]),_:1},8,["onClick"])):O("",!0)]),l("div",Ua,[a[45]||(a[45]=l("span",{class:"label"},"开始天数：",-1)),e(We,{modelValue:b.startDays,"onUpdate:modelValue":i=>b.startDays=i,placeholder:"选择开始天数"},{default:t(()=>[e(Ie,{label:"明天",value:0}),e(Ie,{label:"后天",value:1})]),_:1},8,["modelValue","onUpdate:modelValue"])])])):O("",!0)])]),l("div",Sa,[e(p,{size:"small",onClick:i=>z()},{default:t(()=>[...a[47]||(a[47]=[u("取消",-1)])]),_:1},8,["onClick"]),e(p,{size:"small",type:"primary",onClick:i=>h(b),loading:b.publishing||!1},{default:t(()=>[u(A(b.publishing?"发布中...":"发布"),1)]),_:2},1032,["onClick","loading"])])])),[[Oe,x.value===b.name]])),128))])])])}}},za=Se(Pa,[["__scopeId","data-v-e9b5b1f1"]]),Da={class:"about"},La={__name:"About",setup(_){return(y,w)=>(d(),g("div",Da,[...w[0]||(w[0]=[l("h1",null,"关于我们",-1),l("p",null,"这是关于页面",-1)])]))}},Ea=Se(La,[["__scopeId","data-v-cd67ee8e"]]),Fa=[{path:"/",name:"Dashboard",component:bl},{path:"/account-management",name:"AccountManagement",component:us},{path:"/material-management",name:"MaterialManagement",component:Ts},{path:"/publish-center",name:"PublishCenter",component:za},{path:"/about",name:"About",component:Ea}],Ra=pt({history:ft(),routes:Fa}),Ia=mt(),Le=vt(Bt);for(const[_,y]of Object.entries(Mt))Le.component(_,y);Le.use(Ra);Le.use(Ia);Le.use(Ut);Le.mount("#app");
