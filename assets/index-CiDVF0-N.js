import{b as _e,ax as it,r as x,c as k,R as e,J as t,al as y,o as r,a as l,K as Be,S as Oe,u as b,p as Le,t as We,I as Q,ay as ut,P as A,O as u,az as He,X as rt,L as N,E as ee,w as dt,U as ct,Q as ue,a5 as re,W as pt,aA as ft,aB as mt,aC as vt,au as _t}from"./vue-DsQqJGJA.js";import{h as gt,u as Qe,p as yt,a as ge,m as ht,d as Xe,f as kt,E as f,b as bt,l as wt,c as $t,e as Ct,t as Vt,r as Ae,g as ze,i as De,j as At,k as xt,n as Ge,o as Tt,q as Ke,s as Ut,v as Mt,w as St,x as Pt}from"./elementPlus-BN3AqS-Q.js";import{a as zt}from"./utils-B9ygI19o.js";(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))U(C);new MutationObserver(C=>{for(const R of C)if(R.type==="childList")for(const V of R.addedNodes)V.tagName==="LINK"&&V.rel==="modulepreload"&&U(V)}).observe(document,{childList:!0,subtree:!0});function $(C){const R={};return C.integrity&&(R.integrity=C.integrity),C.referrerPolicy&&(R.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?R.credentials="include":C.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function U(C){if(C.ep)return;C.ep=!0;const R=$(C);fetch(C.href,R)}})();const Dt="/vite.svg",Se=(g,h)=>{const $=g.__vccOpts||g;for(const[U,C]of h)$[U]=C;return $},Lt={id:"app"},Ft={class:"sidebar"},Rt={class:"logo"},Et={src:Dt,alt:"Logo",class:"logo-img"},It={class:"header-content"},Bt={class:"header-left"},Ot={__name:"App",setup(g){const h=it(),$=_e(()=>h.path),U=x(!1),C=()=>{U.value=!U.value};return(R,V)=>{const D=y("el-icon"),S=y("el-menu-item"),B=y("el-menu"),M=y("el-aside"),d=y("el-header"),T=y("router-view"),P=y("el-main"),E=y("el-container");return r(),k("div",Lt,[e(E,null,{default:t(()=>[e(M,{width:U.value?"64px":"200px"},{default:t(()=>[l("div",Ft,[l("div",Rt,[Be(l("img",Et,null,512),[[Oe,U.value]]),Be(l("h2",null,"自媒体自动化运营系统",512),[[Oe,!U.value]])]),e(B,{router:!0,"default-active":$.value,collapse:U.value,class:"sidebar-menu","background-color":"#001529","text-color":"#fff","active-text-color":"#409EFF"},{default:t(()=>[e(S,{index:"/"},{default:t(()=>[e(D,null,{default:t(()=>[e(b(gt))]),_:1}),V[0]||(V[0]=l("span",null,"首页",-1))]),_:1}),e(S,{index:"/account-management"},{default:t(()=>[e(D,null,{default:t(()=>[e(b(Qe))]),_:1}),V[1]||(V[1]=l("span",null,"账号管理",-1))]),_:1}),e(S,{index:"/material-management"},{default:t(()=>[e(D,null,{default:t(()=>[e(b(yt))]),_:1}),V[2]||(V[2]=l("span",null,"素材管理",-1))]),_:1}),e(S,{index:"/publish-center"},{default:t(()=>[e(D,null,{default:t(()=>[e(b(ge))]),_:1}),V[3]||(V[3]=l("span",null,"发布中心",-1))]),_:1}),e(S,{index:"/website"},{default:t(()=>[e(D,null,{default:t(()=>[e(b(ht))]),_:1}),V[4]||(V[4]=l("span",null,"网站",-1))]),_:1}),e(S,{index:"/data"},{default:t(()=>[e(D,null,{default:t(()=>[e(b(Xe))]),_:1}),V[5]||(V[5]=l("span",null,"数据",-1))]),_:1})]),_:1},8,["default-active","collapse"])])]),_:1},8,["width"]),e(E,null,{default:t(()=>[e(d,null,{default:t(()=>[l("div",It,[l("div",Bt,[e(D,{class:"toggle-sidebar",onClick:C},{default:t(()=>[e(b(kt))]),_:1})]),V[6]||(V[6]=l("div",{class:"header-right"},null,-1))])]),_:1}),e(P,null,{default:t(()=>[e(T)]),_:1})]),_:1})]),_:1})])}}},Wt=Se(Ot,[["__scopeId","data-v-176fbaed"]]),xe=zt.create({baseURL:"http://localhost:5409",headers:{"Content-Type":"application/json"}});xe.interceptors.request.use(g=>{const h=localStorage.getItem("token");return h&&(g.headers.Authorization=`Bearer ${h}`),g},g=>(console.error("请求错误:",g),Promise.reject(g)));xe.interceptors.response.use(g=>{const{data:h}=g;return h.code===200||h.success?h:(f.error(h.message||"请求失败"),Promise.reject(new Error(h.message||"请求失败")))},g=>{if(console.error("响应错误:",g),g.response){const{status:h}=g.response;switch(h){case 401:f.error("未授权，请重新登录");break;case 403:f.error("拒绝访问");break;case 404:f.error("请求地址不存在");break;case 500:f.error("服务器内部错误");break;default:f.error("网络错误")}}else f.error("网络连接失败");return Promise.reject(g)});const ve={get(g,h){return xe.get(g,{params:h})},post(g,h,$={}){return xe.post(g,h,$)},put(g,h,$={}){return xe.put(g,h,$)},delete(g,h){return xe.delete(g,{params:h})},upload(g,h,$){return xe.post(g,h,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:$})}},Me={getValidAccounts(){return ve.get("/getValidAccounts")},getAccounts(){return ve.get("/getAccounts")},addAccount(g){return ve.post("/account",g)},updateAccount(g){return ve.post("/updateUserinfo",g)},deleteAccount(g){return ve.get(`/deleteAccount?id=${g}`)}},de={getAllMaterials:()=>ve.get("/getFiles"),uploadMaterial:(g,h)=>ve.upload("/uploadSave",g,h),deleteMaterial:g=>ve.get(`/deleteFile?id=${g}`),downloadMaterial:g=>`http://localhost:5409/download/${g}`,getMaterialPreviewUrl:g=>`http://localhost:5409/getFile?filename=${g}`,getWatchFolder:()=>ve.get("/getWatchFolder"),setWatchFolder:g=>ve.post("/setWatchFolder",{folderPath:g}),stopWatchFolder:()=>ve.post("/stopWatchFolder")},Nt={class:"dashboard"},jt={class:"dashboard-content"},qt={class:"stat-card-content"},Jt={class:"stat-icon"},Kt={class:"stat-info"},Ht={class:"stat-value"},Qt={class:"stat-footer"},Xt={class:"stat-detail"},Gt={class:"stat-card-content"},Yt={class:"stat-icon platform-icon"},Zt={class:"stat-info"},el={class:"stat-value"},tl={class:"stat-footer"},ll={class:"stat-detail"},sl={class:"stat-card-content"},al={class:"stat-icon task-icon"},ol={class:"stat-info"},nl={class:"stat-value"},il={class:"stat-footer"},ul={class:"stat-detail"},rl={class:"stat-card-content"},dl={class:"stat-icon content-icon"},cl={class:"stat-info"},pl={class:"stat-value"},fl={class:"stat-footer"},ml={class:"stat-detail"},vl={class:"quick-actions"},_l={class:"action-icon"},gl={class:"action-icon"},yl={class:"action-icon"},hl={class:"action-icon"},kl={class:"recent-tasks"},bl={class:"section-header"},wl={__name:"Dashboard",setup(g){const h=ut(),$=Le({total:0,normal:0,abnormal:0}),U=Le({total:4,kuaishou:0,douyin:0,channels:0,xiaohongshu:0}),C=Le({total:0,totalSize:0}),R=x([]),V=async()=>{try{const M=await Me.getAccounts();if(M.code===200&&M.data){const T=M.data;$.total=T.length,$.normal=T.filter(P=>P[4]===1).length,$.abnormal=T.filter(P=>P[4]!==1).length,U.xiaohongshu=T.filter(P=>P[1]===1).length,U.channels=T.filter(P=>P[1]===2).length,U.douyin=T.filter(P=>P[1]===3).length,U.kuaishou=T.filter(P=>P[1]===4).length}const d=await de.getAllMaterials();if(d.code===200&&d.data){const T=d.data;C.total=T.length,C.totalSize=T.reduce((P,E)=>P+(E.filesize||0),0).toFixed(2),R.value=T.slice(0,5).map(P=>({id:P.id,filename:P.filename,filesize:P.filesize,upload_time:P.upload_time,file_path:P.file_path}))}}catch(M){console.error("获取仪表盘数据失败:",M)}};We(()=>{V()});const D=M=>{h.push(M)},S=()=>{f.info("正在刷新数据..."),V().then(()=>{f.success("数据刷新完成")})},B=M=>{h.push("/material-management")};return(M,d)=>{const T=y("el-icon"),P=y("el-card"),E=y("el-col"),le=y("el-tag"),J=y("el-tooltip"),H=y("el-row"),Y=y("el-button"),F=y("el-table-column"),ye=y("el-table"),q=y("el-empty");return r(),k("div",Nt,[d[20]||(d[20]=l("div",{class:"page-header"},[l("h1",null,"自媒体自动化运营系统")],-1)),l("div",jt,[e(H,{gutter:20},{default:t(()=>[e(E,{span:6},{default:t(()=>[e(P,{class:"stat-card"},{default:t(()=>[l("div",qt,[l("div",Jt,[e(T,null,{default:t(()=>[e(b(Qe))]),_:1})]),l("div",Kt,[l("div",Ht,A($.total),1),d[4]||(d[4]=l("div",{class:"stat-label"},"账号总数",-1))])]),l("div",Qt,[l("div",Xt,[l("span",null,"正常: "+A($.normal),1),l("span",null,"异常: "+A($.abnormal),1)])])]),_:1})]),_:1}),e(E,{span:6},{default:t(()=>[e(P,{class:"stat-card"},{default:t(()=>[l("div",Gt,[l("div",Yt,[e(T,null,{default:t(()=>[e(b(bt))]),_:1})]),l("div",Zt,[l("div",el,A(U.total),1),d[5]||(d[5]=l("div",{class:"stat-label"},"平台总数",-1))])]),l("div",tl,[l("div",ll,[e(J,{content:"快手账号",placement:"top"},{default:t(()=>[e(le,{size:"small",type:"success"},{default:t(()=>[u(A(U.kuaishou),1)]),_:1})]),_:1}),e(J,{content:"抖音账号",placement:"top"},{default:t(()=>[e(le,{size:"small",type:"danger"},{default:t(()=>[u(A(U.douyin),1)]),_:1})]),_:1}),e(J,{content:"视频号账号",placement:"top"},{default:t(()=>[e(le,{size:"small",type:"warning"},{default:t(()=>[u(A(U.channels),1)]),_:1})]),_:1}),e(J,{content:"小红书账号",placement:"top"},{default:t(()=>[e(le,{size:"small",type:"info"},{default:t(()=>[u(A(U.xiaohongshu),1)]),_:1})]),_:1})])])]),_:1})]),_:1}),e(E,{span:6},{default:t(()=>[e(P,{class:"stat-card"},{default:t(()=>[l("div",sl,[l("div",al,[e(T,null,{default:t(()=>[e(b(wt))]),_:1})]),l("div",ol,[l("div",nl,A(C.total),1),d[6]||(d[6]=l("div",{class:"stat-label"},"素材总数",-1))])]),l("div",il,[l("div",ul,[l("span",null,"总大小: "+A(C.totalSize)+" MB",1)])])]),_:1})]),_:1}),e(E,{span:6},{default:t(()=>[e(P,{class:"stat-card"},{default:t(()=>[l("div",rl,[l("div",dl,[e(T,null,{default:t(()=>[e(b($t))]),_:1})]),l("div",cl,[l("div",pl,A(C.totalSize),1),d[7]||(d[7]=l("div",{class:"stat-label"},"存储空间(MB)",-1))])]),l("div",fl,[l("div",ml,[l("span",null,"素材数: "+A(C.total),1)])])]),_:1})]),_:1})]),_:1}),l("div",vl,[d[16]||(d[16]=l("h2",null,"快捷操作",-1)),e(H,{gutter:20},{default:t(()=>[e(E,{span:6},{default:t(()=>[e(P,{class:"action-card",onClick:d[0]||(d[0]=se=>D("/account-management"))},{default:t(()=>[l("div",_l,[e(T,null,{default:t(()=>[e(b(Ct))]),_:1})]),d[8]||(d[8]=l("div",{class:"action-title"},"账号管理",-1)),d[9]||(d[9]=l("div",{class:"action-desc"},"管理所有平台账号",-1))]),_:1})]),_:1}),e(E,{span:6},{default:t(()=>[e(P,{class:"action-card",onClick:d[1]||(d[1]=se=>D("/material-management"))},{default:t(()=>[l("div",gl,[e(T,null,{default:t(()=>[e(b(ge))]),_:1})]),d[10]||(d[10]=l("div",{class:"action-title"},"素材管理",-1)),d[11]||(d[11]=l("div",{class:"action-desc"},"上传和管理视频素材",-1))]),_:1})]),_:1}),e(E,{span:6},{default:t(()=>[e(P,{class:"action-card",onClick:d[2]||(d[2]=se=>D("/publish-center"))},{default:t(()=>[l("div",yl,[e(T,null,{default:t(()=>[e(b(Vt))]),_:1})]),d[12]||(d[12]=l("div",{class:"action-title"},"发布中心",-1)),d[13]||(d[13]=l("div",{class:"action-desc"},"发布视频到各平台",-1))]),_:1})]),_:1}),e(E,{span:6},{default:t(()=>[e(P,{class:"action-card",onClick:S},{default:t(()=>[l("div",hl,[e(T,null,{default:t(()=>[e(b(Xe))]),_:1})]),d[14]||(d[14]=l("div",{class:"action-title"},"刷新数据",-1)),d[15]||(d[15]=l("div",{class:"action-desc"},"刷新仪表盘统计数据",-1))]),_:1})]),_:1})]),_:1})]),l("div",kl,[l("div",bl,[d[18]||(d[18]=l("h2",null,"最近上传的素材",-1)),e(Y,{text:"",onClick:d[3]||(d[3]=se=>D("/material-management"))},{default:t(()=>[...d[17]||(d[17]=[u("查看全部",-1)])]),_:1})]),R.value.length>0?(r(),Q(ye,{key:0,data:R.value,style:{width:"100%"}},{default:t(()=>[e(F,{prop:"filename",label:"文件名",width:"300"}),e(F,{prop:"filesize",label:"大小(MB)",width:"120"}),e(F,{prop:"upload_time",label:"上传时间",width:"180"}),e(F,{label:"操作"},{default:t(se=>[e(Y,{size:"small",onClick:j=>B(se.row)},{default:t(()=>[...d[19]||(d[19]=[u("查看",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])):(r(),Q(q,{key:1,description:"暂无素材，请先上传"}))])])])}}},$l=Se(wl,[["__scopeId","data-v-4faaca46"]]),Ye=He("account",()=>{const g=x([]),h={1:"小红书",2:"视频号",3:"抖音",4:"快手"};return{accounts:g,setAccounts:D=>{g.value=D.map(S=>({id:S[0],type:S[1],filePath:S[2],name:S[3],status:S[4]===1?"正常":"异常",platform:h[S[1]]||"未知",avatar:"/vite.svg"}))},addAccount:D=>{g.value.push(D)},updateAccount:(D,S)=>{const B=g.value.findIndex(M=>M.id===D);B!==-1&&(g.value[B]={...g.value[B],...S})},deleteAccount:D=>{g.value=g.value.filter(S=>S.id!==D)},getAccountsByPlatform:D=>g.value.filter(S=>S.platform===D)}}),Ne=He("app",()=>{const g=x(!0),h=x(!0),$=x(!1),U=x([]);return{isFirstTimeAccountManagement:g,isFirstTimeMaterialManagement:h,isAccountRefreshing:$,materials:U,setAccountManagementVisited:()=>{g.value=!1},setMaterialManagementVisited:()=>{h.value=!1},resetVisitStatus:()=>{g.value=!0,h.value=!0},setMaterials:d=>{U.value=d},addMaterial:d=>{U.value.push(d)},removeMaterial:d=>{const T=U.value.findIndex(P=>P.id===d);T>-1&&U.value.splice(T,1)},setAccountRefreshing:d=>{$.value=d}}}),Cl={class:"account-management"},Vl={class:"account-tabs"},Al={class:"account-list-container"},xl={class:"account-search"},Tl={class:"action-buttons"},Ul={key:0},Ml={key:0,class:"account-list"},Sl={key:1,class:"empty-data"},Pl={class:"account-list-container"},zl={class:"account-search"},Dl={class:"action-buttons"},Ll={key:0},Fl={key:0,class:"account-list"},Rl={key:1,class:"empty-data"},El={class:"account-list-container"},Il={class:"account-search"},Bl={class:"action-buttons"},Ol={key:0},Wl={key:0,class:"account-list"},Nl={key:1,class:"empty-data"},jl={class:"account-list-container"},ql={class:"account-search"},Jl={class:"action-buttons"},Kl={key:0},Hl={key:0,class:"account-list"},Ql={key:1,class:"empty-data"},Xl={class:"account-list-container"},Gl={class:"account-search"},Yl={class:"action-buttons"},Zl={key:0},es={key:0,class:"account-list"},ts={key:1,class:"empty-data"},ls={key:0,class:"qrcode-container"},ss={key:0,class:"qrcode-wrapper"},as=["src"],os={key:1,class:"loading-wrapper"},ns={key:2,class:"success-wrapper"},is={key:3,class:"error-wrapper"},us={class:"dialog-footer"},rs={__name:"AccountManagement",setup(g){const h=Ye(),$=Ne(),U=x("all"),C=x(""),R=async()=>{try{const c=await Me.getAccounts();if(c.code===200&&c.data){const o=c.data.map(O=>{const _=[...O];return _[4]="验证中",_});h.setAccounts(o)}}catch(c){console.error("快速获取账号数据失败:",c)}},V=async()=>{if(!$.isAccountRefreshing){$.setAccountRefreshing(!0);try{const c=await Me.getValidAccounts();c.code===200&&c.data?(h.setAccounts(c.data),f.success("账号数据获取成功"),$.isFirstTimeAccountManagement&&$.setAccountManagementVisited()):f.error("获取账号数据失败")}catch(c){console.error("获取账号数据失败:",c),f.error("获取账号数据失败")}finally{$.setAccountRefreshing(!1)}}},D=async()=>{setTimeout(async()=>{try{const c=await Me.getValidAccounts();c.code===200&&c.data&&h.setAccounts(c.data)}catch(c){console.error("后台验证账号失败:",c)}},0)};We(()=>{R(),setTimeout(()=>{D()},100)});const S=c=>({快手:"success",抖音:"danger",视频号:"warning",小红书:"info"})[c]||"info",B=c=>c==="异常",M=c=>c==="验证中"?"info":c==="正常"?"success":"danger",d=c=>{B(c.status)&&Pe(c)},T=_e(()=>C.value?h.accounts.filter(c=>c.name.includes(C.value)):h.accounts),P=_e(()=>T.value.filter(c=>c.platform==="快手")),E=_e(()=>T.value.filter(c=>c.platform==="抖音")),le=_e(()=>T.value.filter(c=>c.platform==="视频号")),J=_e(()=>T.value.filter(c=>c.platform==="小红书")),H=()=>{},Y=x(!1),F=x("add"),ye=x(null),q=Le({id:null,name:"",platform:"",status:"正常"}),se={platform:[{required:!0,message:"请选择平台",trigger:"change"}],name:[{required:!0,message:"请输入账号名称",trigger:"blur"}]},j=x(!1),ne=x(""),ie=x(""),ke=()=>{F.value="add",Object.assign(q,{id:null,name:"",platform:"",status:"正常"}),j.value=!1,ne.value="",ie.value="",Y.value=!0},be=c=>{F.value="edit",Object.assign(q,{id:c.id,name:c.name,platform:c.platform,status:c.status}),Y.value=!0},we=c=>{Ge.confirm(`确定要删除账号 ${c.name} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const o=await Me.deleteAccount(c.id);o.code===200?(h.deleteAccount(c.id),f({type:"success",message:"删除成功"})):f.error(o.msg||"删除失败")}catch(o){console.error("删除账号失败:",o),f.error("删除账号失败")}}).catch(()=>{})},$e=c=>{const O=`http://localhost:5409/downloadCookie?filePath=${encodeURIComponent(c.filePath)}`,_=document.createElement("a");_.href=O,_.download=`${c.name}_cookie.json`,_.target="_blank",_.style.display="none",document.body.appendChild(_),_.click(),document.body.removeChild(_)},Ce=c=>{const o=document.createElement("input");o.type="file",o.accept=".json",o.style.display="none",document.body.appendChild(o),o.onchange=async O=>{const _=O.target.files[0];if(_){if(!_.name.endsWith(".json")){f.error("请选择JSON格式的Cookie文件"),document.body.removeChild(o);return}try{const W=new FormData;W.append("file",_),W.append("id",c.id),W.append("platform",c.platform);const I=await(await fetch("http://localhost:5409/uploadCookie",{method:"POST",body:W})).json();I.code===200?(f.success("Cookie文件上传成功"),V()):f.error(I.msg||"Cookie文件上传失败")}catch(W){console.error("上传Cookie文件失败:",W),f.error("Cookie文件上传失败")}finally{document.body.removeChild(o)}}},o.click()},Pe=c=>{F.value="edit",Object.assign(q,{id:c.id,name:c.name,platform:c.platform,status:c.status}),j.value=!1,ne.value="",ie.value="",Y.value=!0,setTimeout(()=>{p(c.platform,c.name)},300)},he=c=>`https://ui-avatars.com/api/?name=${encodeURIComponent(c)}&background=random`;let pe=null;const v=()=>{pe&&(pe.close(),pe=null)},p=(c,o)=>{v(),j.value=!0,ne.value="",ie.value="";const ae=`http://localhost:5409/login?type=${{小红书:"1",视频号:"2",抖音:"3",快手:"4"}[c]||"1"}&id=${encodeURIComponent(o)}`;pe=new EventSource(ae),pe.onmessage=z=>{const I=z.data;if(console.log("SSE消息:",I),!ne.value&&I.length>100)try{I.startsWith("data:image")?ne.value=I:ne.value=`data:image/png;base64,${I}`,console.log("设置二维码数据，长度:",I.length)}catch(X){console.error("处理二维码数据出错:",X)}else(I==="200"||I==="500")&&(ie.value=I,I==="200"?setTimeout(()=>{v(),setTimeout(()=>{Y.value=!1,j.value=!1,f.success(F.value==="edit"?"重新登录成功":"账号添加成功"),f({type:"info",message:"正在同步账号信息...",duration:0}),V().then(()=>{f.closeAll(),f.success("账号信息已更新")})},1e3)},1e3):(v(),setTimeout(()=>{j.value=!1,ne.value="",ie.value=""},2e3)))},pe.onerror=z=>{console.error("SSE连接错误:",z),f.error("连接服务器失败，请稍后再试"),v(),j.value=!1}},Z=()=>{ye.value.validate(async c=>{if(c)if(F.value==="add")p(q.platform,q.name);else try{const O={快手:1,抖音:2,视频号:3,小红书:4}[q.platform]||1,_=await Me.updateAccount({id:q.id,type:O,userName:q.name});if(_.code===200){const W={id:q.id,name:q.name,platform:q.platform,status:q.status};h.updateAccount(q.id,W),f.success("更新成功"),Y.value=!1,V()}else f.error(_.msg||"更新账号失败")}catch(o){console.error("更新账号失败:",o),f.error("更新账号失败")}else return!1})};return rt(()=>{v()}),(c,o)=>{const O=y("el-input"),_=y("el-button"),W=y("el-icon"),ae=y("el-avatar"),z=y("el-table-column"),I=y("el-tag"),X=y("el-table"),ce=y("el-empty"),te=y("el-tab-pane"),L=y("el-tabs"),oe=y("el-option"),Te=y("el-select"),Re=y("el-form-item"),n=y("el-form"),a=y("el-dialog");return r(),k("div",Cl,[o[40]||(o[40]=l("div",{class:"page-header"},[l("h1",null,"账号管理")],-1)),l("div",Vl,[e(L,{modelValue:U.value,"onUpdate:modelValue":o[5]||(o[5]=s=>U.value=s),class:"account-tabs-nav"},{default:t(()=>[e(te,{label:"全部",name:"all"},{default:t(()=>[l("div",Al,[l("div",xl,[e(O,{modelValue:C.value,"onUpdate:modelValue":o[0]||(o[0]=s=>C.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Tl,[e(_,{type:"primary",onClick:ke},{default:t(()=>[...o[10]||(o[10]=[u("添加账号",-1)])]),_:1}),e(_,{type:"info",onClick:V,loading:!1},{default:t(()=>[e(W,{class:ee({"is-loading":b($).isAccountRefreshing})},{default:t(()=>[e(b(Ae))]),_:1},8,["class"]),b($).isAccountRefreshing?(r(),k("span",Ul,"刷新中")):N("",!0)]),_:1})])]),T.value.length>0?(r(),k("div",Ml,[e(X,{data:T.value,style:{width:"100%"}},{default:t(()=>[e(z,{label:"头像",width:"80"},{default:t(s=>[e(ae,{src:he(s.row.name),size:40},null,8,["src"])]),_:1}),e(z,{prop:"name",label:"名称",width:"180"}),e(z,{prop:"platform",label:"平台"},{default:t(s=>[e(I,{type:S(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(z,{prop:"status",label:"状态"},{default:t(s=>[e(I,{type:M(s.row.status),effect:"plain",class:ee({"clickable-status":B(s.row.status)}),onClick:m=>d(s.row)},{default:t(()=>[s.row.status==="验证中"?(r(),Q(W,{key:0,class:ee(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(b(ze))]),_:1},8,["class"])):N("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(z,{label:"操作"},{default:t(s=>[e(_,{size:"small",onClick:m=>be(s.row)},{default:t(()=>[...o[11]||(o[11]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(_,{size:"small",type:"primary",icon:b(De),onClick:m=>$e(s.row)},{default:t(()=>[...o[12]||(o[12]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"info",icon:b(ge),onClick:m=>Ce(s.row)},{default:t(()=>[...o[13]||(o[13]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"danger",onClick:m=>we(s.row)},{default:t(()=>[...o[14]||(o[14]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(r(),k("div",Sl,[e(ce,{description:"暂无账号数据"})]))])]),_:1}),e(te,{label:"快手",name:"kuaishou"},{default:t(()=>[l("div",Pl,[l("div",zl,[e(O,{modelValue:C.value,"onUpdate:modelValue":o[1]||(o[1]=s=>C.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Dl,[e(_,{type:"primary",onClick:ke},{default:t(()=>[...o[15]||(o[15]=[u("添加账号",-1)])]),_:1}),e(_,{type:"info",onClick:V,loading:!1},{default:t(()=>[e(W,{class:ee({"is-loading":b($).isAccountRefreshing})},{default:t(()=>[e(b(Ae))]),_:1},8,["class"]),b($).isAccountRefreshing?(r(),k("span",Ll,"刷新中")):N("",!0)]),_:1})])]),P.value.length>0?(r(),k("div",Fl,[e(X,{data:P.value,style:{width:"100%"}},{default:t(()=>[e(z,{label:"头像",width:"80"},{default:t(s=>[e(ae,{src:he(s.row.name),size:40},null,8,["src"])]),_:1}),e(z,{prop:"name",label:"名称",width:"180"}),e(z,{prop:"platform",label:"平台"},{default:t(s=>[e(I,{type:S(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(z,{prop:"status",label:"状态"},{default:t(s=>[e(I,{type:M(s.row.status),effect:"plain",class:ee({"clickable-status":B(s.row.status)}),onClick:m=>d(s.row)},{default:t(()=>[s.row.status==="验证中"?(r(),Q(W,{key:0,class:ee(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(b(ze))]),_:1},8,["class"])):N("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(z,{label:"操作"},{default:t(s=>[e(_,{size:"small",onClick:m=>be(s.row)},{default:t(()=>[...o[16]||(o[16]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(_,{size:"small",type:"primary",icon:b(De),onClick:m=>$e(s.row)},{default:t(()=>[...o[17]||(o[17]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"info",icon:b(ge),onClick:m=>Ce(s.row)},{default:t(()=>[...o[18]||(o[18]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"danger",onClick:m=>we(s.row)},{default:t(()=>[...o[19]||(o[19]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(r(),k("div",Rl,[e(ce,{description:"暂无快手账号数据"})]))])]),_:1}),e(te,{label:"抖音",name:"douyin"},{default:t(()=>[l("div",El,[l("div",Il,[e(O,{modelValue:C.value,"onUpdate:modelValue":o[2]||(o[2]=s=>C.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Bl,[e(_,{type:"primary",onClick:ke},{default:t(()=>[...o[20]||(o[20]=[u("添加账号",-1)])]),_:1}),e(_,{type:"info",onClick:V,loading:!1},{default:t(()=>[e(W,{class:ee({"is-loading":b($).isAccountRefreshing})},{default:t(()=>[e(b(Ae))]),_:1},8,["class"]),b($).isAccountRefreshing?(r(),k("span",Ol,"刷新中")):N("",!0)]),_:1})])]),E.value.length>0?(r(),k("div",Wl,[e(X,{data:E.value,style:{width:"100%"}},{default:t(()=>[e(z,{label:"头像",width:"80"},{default:t(s=>[e(ae,{src:he(s.row.name),size:40},null,8,["src"])]),_:1}),e(z,{prop:"name",label:"名称",width:"180"}),e(z,{prop:"platform",label:"平台"},{default:t(s=>[e(I,{type:S(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(z,{prop:"status",label:"状态"},{default:t(s=>[e(I,{type:M(s.row.status),effect:"plain",class:ee({"clickable-status":B(s.row.status)}),onClick:m=>d(s.row)},{default:t(()=>[s.row.status==="验证中"?(r(),Q(W,{key:0,class:ee(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(b(ze))]),_:1},8,["class"])):N("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(z,{label:"操作"},{default:t(s=>[e(_,{size:"small",onClick:m=>be(s.row)},{default:t(()=>[...o[21]||(o[21]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(_,{size:"small",type:"primary",icon:b(De),onClick:m=>$e(s.row)},{default:t(()=>[...o[22]||(o[22]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"info",icon:b(ge),onClick:m=>Ce(s.row)},{default:t(()=>[...o[23]||(o[23]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"danger",onClick:m=>we(s.row)},{default:t(()=>[...o[24]||(o[24]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(r(),k("div",Nl,[e(ce,{description:"暂无抖音账号数据"})]))])]),_:1}),e(te,{label:"视频号",name:"channels"},{default:t(()=>[l("div",jl,[l("div",ql,[e(O,{modelValue:C.value,"onUpdate:modelValue":o[3]||(o[3]=s=>C.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Jl,[e(_,{type:"primary",onClick:ke},{default:t(()=>[...o[25]||(o[25]=[u("添加账号",-1)])]),_:1}),e(_,{type:"info",onClick:V,loading:!1},{default:t(()=>[e(W,{class:ee({"is-loading":b($).isAccountRefreshing})},{default:t(()=>[e(b(Ae))]),_:1},8,["class"]),b($).isAccountRefreshing?(r(),k("span",Kl,"刷新中")):N("",!0)]),_:1})])]),le.value.length>0?(r(),k("div",Hl,[e(X,{data:le.value,style:{width:"100%"}},{default:t(()=>[e(z,{label:"头像",width:"80"},{default:t(s=>[e(ae,{src:he(s.row.name),size:40},null,8,["src"])]),_:1}),e(z,{prop:"name",label:"名称",width:"180"}),e(z,{prop:"platform",label:"平台"},{default:t(s=>[e(I,{type:S(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(z,{prop:"status",label:"状态"},{default:t(s=>[e(I,{type:M(s.row.status),effect:"plain",class:ee({"clickable-status":B(s.row.status)}),onClick:m=>d(s.row)},{default:t(()=>[s.row.status==="验证中"?(r(),Q(W,{key:0,class:ee(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(b(ze))]),_:1},8,["class"])):N("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(z,{label:"操作"},{default:t(s=>[e(_,{size:"small",onClick:m=>be(s.row)},{default:t(()=>[...o[26]||(o[26]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(_,{size:"small",type:"primary",icon:b(De),onClick:m=>$e(s.row)},{default:t(()=>[...o[27]||(o[27]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"info",icon:b(ge),onClick:m=>Ce(s.row)},{default:t(()=>[...o[28]||(o[28]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"danger",onClick:m=>we(s.row)},{default:t(()=>[...o[29]||(o[29]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(r(),k("div",Ql,[e(ce,{description:"暂无视频号账号数据"})]))])]),_:1}),e(te,{label:"小红书",name:"xiaohongshu"},{default:t(()=>[l("div",Xl,[l("div",Gl,[e(O,{modelValue:C.value,"onUpdate:modelValue":o[4]||(o[4]=s=>C.value=s),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",Yl,[e(_,{type:"primary",onClick:ke},{default:t(()=>[...o[30]||(o[30]=[u("添加账号",-1)])]),_:1}),e(_,{type:"info",onClick:V,loading:!1},{default:t(()=>[e(W,{class:ee({"is-loading":b($).isAccountRefreshing})},{default:t(()=>[e(b(Ae))]),_:1},8,["class"]),b($).isAccountRefreshing?(r(),k("span",Zl,"刷新中")):N("",!0)]),_:1})])]),J.value.length>0?(r(),k("div",es,[e(X,{data:J.value,style:{width:"100%"}},{default:t(()=>[e(z,{label:"头像",width:"80"},{default:t(s=>[e(ae,{src:he(s.row.name),size:40},null,8,["src"])]),_:1}),e(z,{prop:"name",label:"名称",width:"180"}),e(z,{prop:"platform",label:"平台"},{default:t(s=>[e(I,{type:S(s.row.platform),effect:"plain"},{default:t(()=>[u(A(s.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(z,{prop:"status",label:"状态"},{default:t(s=>[e(I,{type:M(s.row.status),effect:"plain",class:ee({"clickable-status":B(s.row.status)}),onClick:m=>d(s.row)},{default:t(()=>[s.row.status==="验证中"?(r(),Q(W,{key:0,class:ee(s.row.status==="验证中"?"is-loading":"")},{default:t(()=>[e(b(ze))]),_:1},8,["class"])):N("",!0),u(" "+A(s.row.status),1)]),_:2},1032,["type","class","onClick"])]),_:1}),e(z,{label:"操作"},{default:t(s=>[e(_,{size:"small",onClick:m=>be(s.row)},{default:t(()=>[...o[31]||(o[31]=[u("编辑",-1)])]),_:1},8,["onClick"]),e(_,{size:"small",type:"primary",icon:b(De),onClick:m=>$e(s.row)},{default:t(()=>[...o[32]||(o[32]=[u("下载Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"info",icon:b(ge),onClick:m=>Ce(s.row)},{default:t(()=>[...o[33]||(o[33]=[u("上传Cookie",-1)])]),_:1},8,["icon","onClick"]),e(_,{size:"small",type:"danger",onClick:m=>we(s.row)},{default:t(()=>[...o[34]||(o[34]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(r(),k("div",ts,[e(ce,{description:"暂无小红书账号数据"})]))])]),_:1})]),_:1},8,["modelValue"])]),e(a,{modelValue:Y.value,"onUpdate:modelValue":o[9]||(o[9]=s=>Y.value=s),title:F.value==="add"?"添加账号":"编辑账号",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!j.value,"show-close":!j.value},{footer:t(()=>[l("span",us,[e(_,{onClick:o[8]||(o[8]=s=>Y.value=!1)},{default:t(()=>[...o[39]||(o[39]=[u("取消",-1)])]),_:1}),e(_,{type:"primary",onClick:Z,loading:j.value,disabled:j.value},{default:t(()=>[u(A(j.value?"请求中":"确认"),1)]),_:1},8,["loading","disabled"])])]),default:t(()=>[e(n,{model:q,"label-width":"80px",rules:se,ref_key:"accountFormRef",ref:ye},{default:t(()=>[e(Re,{label:"平台",prop:"platform"},{default:t(()=>[e(Te,{modelValue:q.platform,"onUpdate:modelValue":o[6]||(o[6]=s=>q.platform=s),placeholder:"请选择平台",style:{width:"100%"},disabled:F.value==="edit"||j.value},{default:t(()=>[e(oe,{label:"快手",value:"快手"}),e(oe,{label:"抖音",value:"抖音"}),e(oe,{label:"视频号",value:"视频号"}),e(oe,{label:"小红书",value:"小红书"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(Re,{label:"名称",prop:"name"},{default:t(()=>[e(O,{modelValue:q.name,"onUpdate:modelValue":o[7]||(o[7]=s=>q.name=s),placeholder:"请输入账号名称",disabled:j.value},null,8,["modelValue","disabled"])]),_:1}),j.value?(r(),k("div",ls,[ne.value&&!ie.value?(r(),k("div",ss,[o[35]||(o[35]=l("p",{class:"qrcode-tip"},"请使用对应平台APP扫描二维码登录",-1)),l("img",{src:ne.value,alt:"登录二维码",class:"qrcode-image"},null,8,as)])):!ne.value&&!ie.value?(r(),k("div",os,[e(W,{class:"is-loading"},{default:t(()=>[e(b(Ae))]),_:1}),o[36]||(o[36]=l("span",null,"请求中...",-1))])):ie.value==="200"?(r(),k("div",ns,[e(W,null,{default:t(()=>[e(b(At))]),_:1}),o[37]||(o[37]=l("span",null,"添加成功",-1))])):ie.value==="500"?(r(),k("div",is,[e(W,null,{default:t(()=>[e(b(xt))]),_:1}),o[38]||(o[38]=l("span",null,"添加失败，请稍后再试",-1))])):N("",!0)])):N("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title","close-on-press-escape","show-close"])])}}},ds=Se(rs,[["__scopeId","data-v-b3b9d2cb"]]),cs={class:"material-management"},ps={class:"material-list-container"},fs={class:"folder-watch-section"},ms={class:"folder-watch-header"},vs={class:"folder-watch-controls"},_s={class:"folder-watch-tip"},gs={class:"material-search"},ys={class:"action-buttons"},hs={key:0},ks={key:0,class:"material-list"},bs={key:1,class:"empty-data"},ws={class:"upload-form"},$s={class:"upload-file-list"},Cs={class:"file-name"},Vs={class:"dialog-footer"},As={key:0,class:"preview-container"},xs={key:0,class:"video-preview"},Ts={controls:"",style:{"max-width":"100%","max-height":"60vh"}},Us=["src"],Ms={key:1,class:"image-preview"},Ss=["src"],Ps={key:2,class:"file-info"},zs={__name:"MaterialManagement",setup(g){const h=Ne(),$=x(""),U=x(!1),C=x(!1),R=x(""),V=x(!1);let D=null;const S=x(!1),B=x(!1),M=x(null),d=x([]),T=x(""),P=_e(()=>d.value.length>1),E=x({});dt(d,v=>{v.length<=1});const le=async()=>{U.value=!0;try{const v=await de.getAllMaterials();v.code===200?(h.setMaterials(v.data),f.success("刷新成功")):f.error("获取素材列表失败")}catch(v){console.error("获取素材列表出错:",v),f.error("获取素材列表失败")}finally{U.value=!1}},J=_e(()=>{if(!$.value)return h.materials;const v=$.value.toLowerCase();return h.materials.filter(p=>p.filename.toLowerCase().includes(v))}),H=()=>{},Y=()=>{d.value=[],T.value="",E.value={},S.value=!0},F=()=>{d.value=[],T.value="",E.value={}},ye=(v,p)=>{d.value=p;const Z={};for(const c of p)Z[c.uid]={percentage:0,speed:""};E.value=Z},q=(v,p)=>{d.value=p;const Z={...E.value};delete Z[v.uid],E.value=Z},se=async()=>{if(d.value.length===0){f.warning("请选择要上传的文件");return}C.value=!0;for(const v of d.value)try{if(!v||!v.raw){f.warning(`文件 ${v.name} 对象无效，已跳过`);continue}const p=new FormData;p.append("file",v.raw),d.value.length===1&&T.value.trim()&&p.append("filename",T.value.trim());let Z=0,c=Date.now();const o=await de.uploadMaterial(p,O=>{const _=E.value[v.uid];if(!_)return;const W=Math.round(O.loaded*100/O.total);_.percentage=W;const ae=Date.now(),z=(ae-c)/1e3,I=O.loaded-Z;if(z>.5){const X=I/z;X>1024*1024?_.speed=(X/(1024*1024)).toFixed(2)+" MB/s":_.speed=(X/1024).toFixed(2)+" KB/s",Z=O.loaded,c=ae}});if(o.code===200){f.success(`文件 ${v.name} 上传成功`);const O=E.value[v.uid];O&&(O.speed="完成")}else f.error(`文件 ${v.name} 上传失败: ${o.msg||"未知错误"}`)}catch(p){console.error(`上传文件 ${v.name} 出错:`,p),f.error(`文件 ${v.name} 上传失败: ${p.message||"未知错误"}`)}C.value=!1,await le()},j=async v=>{M.value=null,B.value=!0,f.info("加载中...");try{await new Promise(p=>setTimeout(p,100)),M.value=v}catch(p){console.error("预览素材出错:",p),f.error("预览加载失败"),B.value=!1}},ne=v=>{Ge.confirm(`确定要删除素材 ${v.filename} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const p=await de.deleteMaterial(v.id);p.code===200?(h.removeMaterial(v.id),f.success("删除成功")):f.error(p.msg||"删除失败")}catch(p){console.error("删除素材出错:",p),f.error("删除失败")}}).catch(()=>{})},ie=v=>{const p=v.split("/").pop();return de.getMaterialPreviewUrl(p)},ke=v=>{const p=de.downloadMaterial(v.file_path);window.open(p,"_blank")},be=v=>[".mp4",".avi",".mov",".wmv",".flv",".mkv"].some(Z=>v.toLowerCase().endsWith(Z)),we=v=>[".jpg",".jpeg",".png",".gif",".bmp",".webp"].some(Z=>v.toLowerCase().endsWith(Z)),$e=async()=>{try{const v=await de.getWatchFolder();v.code===200&&v.data&&(R.value=v.data.watchPath||"",V.value=v.data.isRunning||!1,V.value&&he())}catch(v){console.error("获取监控状态失败:",v)}},Ce=async()=>{if(!R.value.trim()){f.warning("请输入文件夹路径");return}try{const v=await de.setWatchFolder(R.value.trim());v.code===200?(V.value=!0,f.success("文件夹监控已启动"),he(),await le()):f.error(v.msg||"启动监控失败")}catch(v){console.error("启动监控失败:",v),f.error("启动监控失败")}},Pe=async()=>{try{const v=await de.stopWatchFolder();v.code===200?(V.value=!1,f.success("文件夹监控已停止"),pe()):f.error(v.msg||"停止监控失败")}catch(v){console.error("停止监控失败:",v),f.error("停止监控失败")}},he=()=>{D&&clearInterval(D),D=setInterval(async()=>{try{const v=await de.getAllMaterials();v.code===200&&h.setMaterials(v.data)}catch(v){console.error("自动刷新素材列表失败:",v)}},5e3)},pe=()=>{D&&(clearInterval(D),D=null)};return We(()=>{h.materials.length===0&&le(),$e()}),ct(()=>{pe()}),(v,p)=>{const Z=y("el-tag"),c=y("el-input"),o=y("el-button"),O=y("el-icon"),_=y("el-table-column"),W=y("el-table"),ae=y("el-empty"),z=y("el-form-item"),I=y("el-upload"),X=y("el-progress"),ce=y("el-form"),te=y("el-dialog");return r(),k("div",cs,[p[19]||(p[19]=l("div",{class:"page-header"},[l("h1",null,"素材管理")],-1)),l("div",ps,[l("div",fs,[l("div",ms,[p[7]||(p[7]=l("h3",null,"文件夹监控",-1)),e(Z,{type:V.value?"success":"info",size:"small"},{default:t(()=>[u(A(V.value?"监控中":"已停止"),1)]),_:1},8,["type"])]),l("div",vs,[e(c,{modelValue:R.value,"onUpdate:modelValue":p[0]||(p[0]=L=>R.value=L),placeholder:"请输入要监控的文件夹路径",disabled:V.value,clearable:"",style:{flex:"1","margin-right":"10px"}},null,8,["modelValue","disabled"]),V.value?(r(),Q(o,{key:1,type:"danger",onClick:Pe},{default:t(()=>[...p[9]||(p[9]=[u(" 停止监控 ",-1)])]),_:1})):(r(),Q(o,{key:0,type:"primary",onClick:Ce,disabled:!R.value},{default:t(()=>[...p[8]||(p[8]=[u(" 开始监控 ",-1)])]),_:1},8,["disabled"]))]),l("div",_s,[e(O,null,{default:t(()=>[e(b(Tt))]),_:1}),p[10]||(p[10]=l("span",null,"启用后，系统将自动监控指定文件夹中的新视频文件，并自动导入到素材库中",-1))])]),l("div",gs,[e(c,{modelValue:$.value,"onUpdate:modelValue":p[1]||(p[1]=L=>$.value=L),placeholder:"输入文件名搜索","prefix-icon":"Search",clearable:"",onClear:H,onInput:H},null,8,["modelValue"]),l("div",ys,[e(o,{type:"primary",onClick:Y},{default:t(()=>[...p[11]||(p[11]=[u("上传素材",-1)])]),_:1}),e(o,{type:"info",onClick:le,loading:!1},{default:t(()=>[e(O,{class:ee({"is-loading":U.value})},{default:t(()=>[e(b(Ae))]),_:1},8,["class"]),U.value?(r(),k("span",hs,"刷新中")):N("",!0)]),_:1})])]),J.value.length>0?(r(),k("div",ks,[e(W,{data:J.value,style:{width:"100%"}},{default:t(()=>[e(_,{prop:"uuid",label:"UUID",width:"180"}),e(_,{prop:"filename",label:"文件名",width:"300"}),e(_,{prop:"filesize",label:"文件大小",width:"120"},{default:t(L=>[u(A(L.row.filesize)+" MB ",1)]),_:1}),e(_,{prop:"upload_time",label:"上传时间",width:"180"}),e(_,{label:"操作"},{default:t(L=>[e(o,{size:"small",onClick:oe=>j(L.row)},{default:t(()=>[...p[12]||(p[12]=[u("预览",-1)])]),_:1},8,["onClick"]),e(o,{size:"small",type:"danger",onClick:oe=>ne(L.row)},{default:t(()=>[...p[13]||(p[13]=[u("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(r(),k("div",bs,[e(ae,{description:"暂无素材数据"})]))]),e(te,{modelValue:S.value,"onUpdate:modelValue":p[4]||(p[4]=L=>S.value=L),title:"上传素材",width:"40%",onClose:F},{footer:t(()=>[l("div",Vs,[e(o,{onClick:p[3]||(p[3]=L=>S.value=!1)},{default:t(()=>[...p[16]||(p[16]=[u("取消",-1)])]),_:1}),e(o,{type:"primary",onClick:se,loading:C.value},{default:t(()=>[u(A(C.value?"上传中":"确认上传"),1)]),_:1},8,["loading"])])]),default:t(()=>[l("div",ws,[e(ce,{"label-width":"80px"},{default:t(()=>[e(z,{label:"文件名称:"},{default:t(()=>[e(c,{modelValue:T.value,"onUpdate:modelValue":p[2]||(p[2]=L=>T.value=L),placeholder:"选填 (仅单个文件时生效)",disabled:P.value,clearable:""},null,8,["modelValue","disabled"])]),_:1}),e(z,{label:"选择文件"},{default:t(()=>[e(I,{class:"upload-demo",drag:"",multiple:"","auto-upload":!1,"on-change":ye,"on-remove":q,"file-list":d.value},{tip:t(()=>[...p[14]||(p[14]=[l("div",{class:"el-upload__tip"}," 支持视频、图片等格式文件，可一次选择多个文件 ",-1)])]),default:t(()=>[e(O,{class:"el-icon--upload"},{default:t(()=>[e(b(ge))]),_:1}),p[15]||(p[15]=l("div",{class:"el-upload__text"},[u(" 将文件拖到此处，或"),l("em",null,"点击上传")],-1))]),_:1},8,["file-list"])]),_:1}),d.value.length>0?(r(),Q(z,{key:0,label:"上传列表"},{default:t(()=>[l("div",$s,[(r(!0),k(ue,null,re(d.value,L=>{var oe;return r(),k("div",{key:L.uid,class:"upload-file-item"},[l("span",Cs,A(L.name),1),e(X,{percentage:((oe=E.value[L.uid])==null?void 0:oe.percentage)||0,"text-inside":!0,"stroke-width":20,style:{width:"100%","margin-top":"5px"}},{default:t(()=>{var Te;return[l("span",null,A(((Te=E.value[L.uid])==null?void 0:Te.speed)||""),1)]}),_:2},1032,["percentage"])])}),128))])]),_:1})):N("",!0)]),_:1})])]),_:1},8,["modelValue"]),e(te,{modelValue:B.value,"onUpdate:modelValue":p[6]||(p[6]=L=>B.value=L),title:"素材预览",width:"50%",top:"10vh"},{default:t(()=>[M.value?(r(),k("div",As,[be(M.value.filename)?(r(),k("div",xs,[l("video",Ts,[l("source",{src:ie(M.value.file_path),type:"video/mp4"},null,8,Us),p[17]||(p[17]=u(" 您的浏览器不支持视频播放 ",-1))])])):we(M.value.filename)?(r(),k("div",Ms,[l("img",{src:ie(M.value.file_path),style:{"max-width":"100%","max-height":"60vh"}},null,8,Ss)])):(r(),k("div",Ps,[l("p",null,"文件名: "+A(M.value.filename),1),l("p",null,"文件大小: "+A(M.value.filesize)+" MB",1),l("p",null,"上传时间: "+A(M.value.upload_time),1),e(o,{type:"primary",onClick:p[5]||(p[5]=L=>ke(M.value))},{default:t(()=>[...p[18]||(p[18]=[u("下载文件",-1)])]),_:1})]))])):N("",!0)]),_:1},8,["modelValue"])])}}},Ds=Se(zs,[["__scopeId","data-v-0c3aff46"]]),Ls={class:"publish-center"},Fs={class:"tab-management"},Rs={class:"tab-header"},Es={class:"tab-list"},Is=["onClick"],Bs={class:"tab-actions"},Os={class:"publish-content"},Ws={class:"tab-content-wrapper"},Ns={key:0,class:"publish-status"},js={class:"upload-section"},qs={class:"upload-options"},Js={key:0,class:"uploaded-files"},Ks={class:"file-list"},Hs={class:"file-size"},Qs={class:"upload-options-content"},Xs={class:"publish-progress"},Gs={key:0,class:"current-publishing"},Ys={key:1,class:"publish-results"},Zs={class:"label"},ea={class:"message"},ta={class:"dialog-footer"},la={class:"material-library-content"},sa={class:"material-list"},aa={class:"material-info"},oa={class:"material-name"},na={class:"material-details"},ia={class:"file-size"},ua={class:"upload-time"},ra={class:"dialog-footer"},da={class:"account-section"},ca={class:"account-display"},pa={class:"selected-accounts"},fa={class:"account-dialog-content"},ma={class:"account-list"},va={class:"account-info"},_a={class:"account-name"},ga={class:"dialog-footer"},ya={class:"platform-section"},ha={key:1,class:"draft-section"},ka={key:2,class:"product-section"},ba={class:"title-section"},wa={class:"topic-section"},$a={class:"topic-display"},Ca={class:"selected-topics"},Va={class:"topic-dialog-content"},Aa={class:"custom-topic-input"},xa={class:"recommended-topics"},Ta={class:"topic-grid"},Ua={class:"dialog-footer"},Ma={key:3,class:"product-section"},Sa={class:"schedule-section"},Pa={class:"schedule-controls"},za={key:0,class:"schedule-settings"},Da={class:"schedule-item"},La={class:"schedule-item"},Fa={class:"schedule-item"},Ra={class:"action-buttons"},Ea={__name:"PublishCenter",setup(g){const h="http://localhost:5409",$=_e(()=>({Authorization:`Bearer ${localStorage.getItem("token")||""}`})),U=x("tab1");let C=1;const R=Ne(),V=x(!1),D=x(!1),S=x(!1),B=x(null),M=x([]),d=_e(()=>R.materials),T=x(!1);x(""),x("info");const P=[{key:3,name:"抖音"},{key:4,name:"快手"},{key:2,name:"视频号"},{key:1,name:"小红书"}],E={name:"tab1",label:"发布1",fileList:[],displayFileList:[],selectedAccounts:[],selectedPlatform:1,title:"",productLink:"",productTitle:"",selectedTopics:[],scheduleEnabled:!1,videosPerDay:1,dailyTimes:["10:00"],startDays:0,publishStatus:null,publishing:!1,isDraft:!1},le=()=>{try{return typeof structuredClone=="function"?structuredClone(E):JSON.parse(JSON.stringify(E))}catch{return JSON.parse(JSON.stringify(E))}},J=Le([le()]),H=x(!1),Y=x([]),F=x(null),ye=Ye(),q=_e(()=>{const n={3:"抖音",2:"视频号",1:"小红书",4:"快手"},a=F.value?n[F.value.selectedPlatform]:null;return a?ye.accounts.filter(s=>s.platform===a):[]}),se=x(!1),j=x(""),ne=["游戏","电影","音乐","美食","旅行","文化","科技","生活","娱乐","体育","教育","艺术","健康","时尚","美妆","摄影","宠物","汽车"],ie=()=>{C++;const n=le();n.name=`tab${C}`,n.label=`发布${C}`,J.push(n),U.value=n.name},ke=n=>{const a=J.findIndex(s=>s.name===n);a>-1&&(J.splice(a,1),U.value===n&&J.length>0&&(U.value=J[0].name))},be=(n,a,s)=>{if(n.code===200){const m=n.data.path||n.data,K=m.split("/").pop(),fe={name:a.name,url:de.getMaterialPreviewUrl(K),path:m,size:a.size,type:a.type};s.fileList.push(fe),s.displayFileList=[...s.fileList.map(me=>({name:me.name,url:me.url}))],f.success("文件上传成功"),console.log("上传成功:",fe)}else f.error(n.msg||"上传失败")},we=n=>{f.error("文件上传失败"),console.error("上传错误:",n)},$e=(n,a)=>{n.fileList.splice(a,1),n.displayFileList=[...n.fileList.map(s=>({name:s.name,url:s.url}))],f.success("文件删除成功")},Ce=n=>{F.value=n,se.value=!0},Pe=()=>{if(!j.value.trim()){f.warning("请输入话题内容");return}F.value&&!F.value.selectedTopics.includes(j.value.trim())?(F.value.selectedTopics.push(j.value.trim()),j.value="",f.success("话题添加成功")):f.warning("话题已存在")},he=n=>{if(!F.value)return;const a=F.value.selectedTopics.indexOf(n);a>-1?F.value.selectedTopics.splice(a,1):F.value.selectedTopics.push(n)},pe=(n,a)=>{n.selectedTopics.splice(a,1)},v=()=>{se.value=!1,j.value="",F.value=null,f.success("添加话题完成")},p=n=>{F.value=n,Y.value=[...n.selectedAccounts],H.value=!0},Z=()=>{F.value&&(F.value.selectedAccounts=[...Y.value]),H.value=!1,F.value=null,f.success("账号选择完成")},c=(n,a)=>{n.selectedAccounts.splice(a,1)},o=n=>{const a=ye.accounts.find(s=>s.id===n);return a?a.name:n},O=n=>{f.info("已取消发布")},_=async n=>n.publishing?Promise.reject(new Error("正在发布中，请稍候...")):(n.publishing=!0,new Promise((a,s)=>{if(n.fileList.length===0){f.error("请先上传视频文件"),n.publishing=!1,s(new Error("请先上传视频文件"));return}if(!n.title.trim()){f.error("请输入标题"),n.publishing=!1,s(new Error("请输入标题"));return}if(!n.selectedPlatform){f.error("请选择发布平台"),n.publishing=!1,s(new Error("请选择发布平台"));return}if(n.selectedAccounts.length===0){f.error("请选择发布账号"),n.publishing=!1,s(new Error("请选择发布账号"));return}const m={type:n.selectedPlatform,title:n.title,tags:n.selectedTopics,fileList:n.fileList.map(K=>K.path),accountList:n.selectedAccounts.map(K=>{const fe=ye.accounts.find(me=>me.id===K);return fe?fe.filePath:K}),enableTimer:n.scheduleEnabled?1:0,videosPerDay:n.scheduleEnabled&&n.videosPerDay||1,dailyTimes:n.scheduleEnabled?n.dailyTimes||["10:00"]:["10:00"],startDays:n.scheduleEnabled&&n.startDays||0,category:0,productLink:n.productLink.trim()||"",productTitle:n.productTitle.trim()||"",isDraft:n.isDraft};fetch(`${h}/postVideo`,{method:"POST",headers:{"Content-Type":"application/json",...$.value},body:JSON.stringify(m)}).then(K=>K.json()).then(K=>{K.code===200?(n.publishStatus={message:"发布成功",type:"success"},n.fileList=[],n.displayFileList=[],n.title="",n.selectedTopics=[],n.selectedAccounts=[],n.scheduleEnabled=!1,a()):(n.publishStatus={message:`发布失败：${K.msg||"发布失败"}`,type:"error"},s(new Error(K.msg||"发布失败")))}).catch(K=>{console.error("发布错误:",K),n.publishStatus={message:"发布失败，请检查网络连接",type:"error"},s(K)}).finally(()=>{n.publishing=!1})})),W=n=>{B.value=n,V.value=!0},ae=()=>{V.value=!1,D.value=!0},z=async()=>{if(V.value=!1,d.value.length===0)try{const n=await de.getAllMaterials();if(n.code===200)R.setMaterials(n.data);else{f.error("获取素材列表失败");return}}catch(n){console.error("获取素材列表出错:",n),f.error("获取素材列表失败");return}M.value=[],S.value=!0},I=()=>{if(M.value.length===0){f.warning("请选择至少一个素材");return}B.value&&(M.value.forEach(a=>{const s=d.value.find(m=>m.id===a);if(s){const m={name:s.filename,url:de.getMaterialPreviewUrl(s.file_path.split("/").pop()),path:s.file_path,size:s.filesize*1024*1024,type:"video/mp4"};B.value.fileList.some(fe=>fe.path===m.path)||B.value.fileList.push(m)}}),B.value.displayFileList=[...B.value.fileList.map(a=>({name:a.name,url:a.url}))]);const n=M.value.length;S.value=!1,M.value=[],B.value=null,f.success(`已添加 ${n} 个素材`)},X=x(!1),ce=x(null),te=x(0),L=x([]),oe=x(!1),Te=()=>{oe.value=!0,f.info("正在取消发布...")},Re=async()=>{if(!T.value){T.value=!0,ce.value=null,te.value=0,L.value=[],oe.value=!1,X.value=!0;try{for(let m=0;m<J.length;m++){if(oe.value){L.value.push({label:J[m].label,status:"cancelled",message:"已取消"});continue}const K=J[m];ce.value=K,te.value=Math.floor(m/J.length*100);try{await _(K),L.value.push({label:K.label,status:"success",message:"发布成功"})}catch(fe){L.value.push({label:K.label,status:"error",message:fe.message})}}te.value=100;const n=L.value.filter(m=>m.status==="success").length,a=L.value.filter(m=>m.status==="error").length,s=L.value.filter(m=>m.status==="cancelled").length;oe.value?f.warning(`发布已取消：${n}个成功，${a}个失败，${s}个未执行`):a>0?f.error(`发布完成：${n}个成功，${a}个失败`):(f.success("所有Tab发布成功"),setTimeout(()=>{X.value=!1},1e3))}catch(n){console.error("批量发布出错:",n),f.error("批量发布出错，请重试")}finally{T.value=!1,oe.value=!1}}};return(n,a)=>{const s=y("el-icon"),m=y("el-button"),K=y("el-alert"),fe=y("el-link"),me=y("el-dialog"),Ze=y("el-upload"),et=y("el-progress"),tt=y("Check"),lt=y("InfoFilled"),Ee=y("el-checkbox"),je=y("el-checkbox-group"),qe=y("el-tag"),st=y("el-radio"),at=y("el-radio-group"),Ue=y("el-input"),ot=y("el-switch"),Ie=y("el-option"),Je=y("el-select"),nt=y("el-time-select");return r(),k("div",Ls,[l("div",Fs,[l("div",Rs,[l("div",Es,[(r(!0),k(ue,null,re(J,w=>(r(),k("div",{key:w.name,class:ee(["tab-item",{active:U.value===w.name}]),onClick:i=>U.value=w.name},[l("span",null,A(w.label),1),J.length>1?(r(),Q(s,{key:0,class:"close-icon",onClick:pt(i=>ke(w.name),["stop"])},{default:t(()=>[e(b(Ke))]),_:1},8,["onClick"])):N("",!0)],10,Is))),128))]),l("div",Bs,[e(m,{type:"primary",size:"small",onClick:ie,class:"add-tab-btn"},{default:t(()=>[e(s,null,{default:t(()=>[e(b(Ut))]),_:1}),a[13]||(a[13]=u(" 添加Tab ",-1))]),_:1}),e(m,{type:"success",size:"small",onClick:Re,loading:T.value,class:"batch-publish-btn"},{default:t(()=>[...a[14]||(a[14]=[u(" 批量发布 ",-1)])]),_:1},8,["loading"])])])]),l("div",Os,[l("div",Ws,[(r(!0),k(ue,null,re(J,w=>Be((r(),k("div",{key:w.name,class:"tab-content"},[w.publishStatus?(r(),k("div",Ns,[e(K,{title:w.publishStatus.message,type:w.publishStatus.type,closable:!1,"show-icon":""},null,8,["title","type"])])):N("",!0),l("div",js,[a[18]||(a[18]=l("h3",null,"视频",-1)),l("div",qs,[e(m,{type:"primary",onClick:i=>W(w),class:"upload-btn"},{default:t(()=>[e(s,null,{default:t(()=>[e(b(ge))]),_:1}),a[15]||(a[15]=u(" 上传视频 ",-1))]),_:1},8,["onClick"])]),w.fileList.length>0?(r(),k("div",Js,[a[17]||(a[17]=l("h4",null,"已上传文件：",-1)),l("div",Ks,[(r(!0),k(ue,null,re(w.fileList,(i,G)=>(r(),k("div",{key:G,class:"file-item"},[e(fe,{href:i.url,target:"_blank",type:"primary"},{default:t(()=>[u(A(i.name),1)]),_:2},1032,["href"]),l("span",Hs,A((i.size/1024/1024).toFixed(2))+"MB",1),e(m,{type:"danger",size:"small",onClick:Ve=>$e(w,G)},{default:t(()=>[...a[16]||(a[16]=[u("删除",-1)])]),_:1},8,["onClick"])]))),128))])])):N("",!0)]),e(me,{modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=i=>V.value=i),title:"选择上传方式",width:"400px",class:"upload-options-dialog"},{default:t(()=>[l("div",Qs,[e(m,{type:"primary",onClick:ae,class:"option-btn"},{default:t(()=>[e(s,null,{default:t(()=>[e(b(ge))]),_:1}),a[19]||(a[19]=u(" 本地上传 ",-1))]),_:1}),e(m,{type:"success",onClick:z,class:"option-btn"},{default:t(()=>[e(s,null,{default:t(()=>[e(b(Mt))]),_:1}),a[20]||(a[20]=u(" 素材库 ",-1))]),_:1})])]),_:1},8,["modelValue"]),e(me,{modelValue:D.value,"onUpdate:modelValue":a[1]||(a[1]=i=>D.value=i),title:"本地上传",width:"600px",class:"local-upload-dialog"},{default:t(()=>[e(Ze,{class:"video-upload",drag:"","auto-upload":!0,action:`${b(h)}/upload`,"on-success":(i,G)=>be(i,G,B.value),"on-error":we,multiple:"",accept:"video/*",headers:$.value},{tip:t(()=>[...a[21]||(a[21]=[l("div",{class:"el-upload__tip"}," 支持MP4、AVI等视频格式，可上传多个文件 ",-1)])]),default:t(()=>[e(s,{class:"el-icon--upload"},{default:t(()=>[e(b(ge))]),_:1}),a[22]||(a[22]=l("div",{class:"el-upload__text"},[u(" 将视频文件拖到此处，或"),l("em",null,"点击上传")],-1))]),_:1},8,["action","on-success","headers"])]),_:1},8,["modelValue"]),e(me,{modelValue:X.value,"onUpdate:modelValue":a[3]||(a[3]=i=>X.value=i),title:"批量发布进度",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:t(()=>[l("div",ta,[e(m,{onClick:Te,disabled:te.value===100},{default:t(()=>[...a[23]||(a[23]=[u(" 取消发布 ",-1)])]),_:1},8,["disabled"]),te.value===100?(r(),Q(m,{key:0,type:"primary",onClick:a[2]||(a[2]=i=>X.value=!1)},{default:t(()=>[...a[24]||(a[24]=[u(" 关闭 ",-1)])]),_:1})):N("",!0)])]),default:t(()=>[l("div",Xs,[e(et,{percentage:te.value,status:te.value===100?"success":""},null,8,["percentage","status"]),ce.value?(r(),k("div",Gs," 正在发布："+A(ce.value.label),1)):N("",!0),L.value.length>0?(r(),k("div",Ys,[(r(!0),k(ue,null,re(L.value,(i,G)=>(r(),k("div",{key:G,class:ee(["result-item",i.status])},[i.status==="success"?(r(),Q(s,{key:0},{default:t(()=>[e(tt)]),_:1})):i.status==="error"?(r(),Q(s,{key:1},{default:t(()=>[e(b(Ke))]),_:1})):(r(),Q(s,{key:2},{default:t(()=>[e(lt)]),_:1})),l("span",Zs,A(i.label),1),l("span",ea,A(i.message),1)],2))),128))])):N("",!0)])]),_:1},8,["modelValue"]),e(me,{modelValue:S.value,"onUpdate:modelValue":a[6]||(a[6]=i=>S.value=i),title:"选择素材",width:"800px",class:"material-library-dialog"},{footer:t(()=>[l("div",ra,[e(m,{onClick:a[5]||(a[5]=i=>S.value=!1)},{default:t(()=>[...a[25]||(a[25]=[u("取消",-1)])]),_:1}),e(m,{type:"primary",onClick:I},{default:t(()=>[...a[26]||(a[26]=[u("确定",-1)])]),_:1})])]),default:t(()=>[l("div",la,[e(je,{modelValue:M.value,"onUpdate:modelValue":a[4]||(a[4]=i=>M.value=i)},{default:t(()=>[l("div",sa,[(r(!0),k(ue,null,re(d.value,i=>(r(),k("div",{key:i.id,class:"material-item"},[e(Ee,{label:i.id,class:"material-checkbox"},{default:t(()=>[l("div",aa,[l("div",oa,A(i.filename),1),l("div",na,[l("span",ia,A(i.filesize)+"MB",1),l("span",ua,A(i.upload_time),1)])])]),_:2},1032,["label"])]))),128))])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]),l("div",da,[a[28]||(a[28]=l("h3",null,"账号",-1)),l("div",ca,[l("div",pa,[(r(!0),k(ue,null,re(w.selectedAccounts,(i,G)=>(r(),Q(qe,{key:G,closable:"",onClose:Ve=>c(w,G),class:"account-tag"},{default:t(()=>[u(A(o(i)),1)]),_:2},1032,["onClose"]))),128))]),e(m,{type:"primary",plain:"",onClick:i=>p(w),class:"select-account-btn"},{default:t(()=>[...a[27]||(a[27]=[u(" 选择账号 ",-1)])]),_:1},8,["onClick"])])]),e(me,{modelValue:H.value,"onUpdate:modelValue":a[9]||(a[9]=i=>H.value=i),title:"选择账号",width:"600px",class:"account-dialog"},{footer:t(()=>[l("div",ga,[e(m,{onClick:a[8]||(a[8]=i=>H.value=!1)},{default:t(()=>[...a[29]||(a[29]=[u("取消",-1)])]),_:1}),e(m,{type:"primary",onClick:Z},{default:t(()=>[...a[30]||(a[30]=[u("确定",-1)])]),_:1})])]),default:t(()=>[l("div",fa,[e(je,{modelValue:Y.value,"onUpdate:modelValue":a[7]||(a[7]=i=>Y.value=i)},{default:t(()=>[l("div",ma,[(r(!0),k(ue,null,re(q.value,i=>(r(),Q(Ee,{key:i.id,label:i.id,class:"account-item"},{default:t(()=>[l("div",va,[l("span",_a,A(i.name),1)])]),_:2},1032,["label"]))),128))])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]),l("div",ya,[a[31]||(a[31]=l("h3",null,"平台",-1)),e(at,{modelValue:w.selectedPlatform,"onUpdate:modelValue":i=>w.selectedPlatform=i,class:"platform-radios"},{default:t(()=>[(r(),k(ue,null,re(P,i=>e(st,{key:i.key,label:i.key,class:"platform-radio"},{default:t(()=>[u(A(i.name),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])]),w.selectedPlatform===2?(r(),k("div",ha,[e(Ee,{modelValue:w.isDraft,"onUpdate:modelValue":i=>w.isDraft=i,label:"视频号仅保存草稿(用手机发布)",class:"draft-checkbox"},null,8,["modelValue","onUpdate:modelValue"])])):N("",!0),w.selectedPlatform===3?(r(),k("div",ka,[a[32]||(a[32]=l("h3",null,"商品链接",-1)),e(Ue,{modelValue:w.productTitle,"onUpdate:modelValue":i=>w.productTitle=i,type:"text",rows:1,placeholder:"请输入商品名称",maxlength:"200",class:"product-name-input"},null,8,["modelValue","onUpdate:modelValue"]),e(Ue,{modelValue:w.productLink,"onUpdate:modelValue":i=>w.productLink=i,type:"text",rows:1,placeholder:"请输入商品链接",maxlength:"200",class:"product-link-input"},null,8,["modelValue","onUpdate:modelValue"])])):N("",!0),l("div",ba,[a[33]||(a[33]=l("h3",null,"标题",-1)),e(Ue,{modelValue:w.title,"onUpdate:modelValue":i=>w.title=i,type:"textarea",rows:3,placeholder:"请输入标题",maxlength:"100","show-word-limit":"",class:"title-input"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",wa,[a[35]||(a[35]=l("h3",null,"话题",-1)),l("div",$a,[l("div",Ca,[(r(!0),k(ue,null,re(w.selectedTopics,(i,G)=>(r(),Q(qe,{key:G,closable:"",onClose:Ve=>pe(w,G),class:"topic-tag"},{default:t(()=>[u(" #"+A(i),1)]),_:2},1032,["onClose"]))),128))]),e(m,{type:"primary",plain:"",onClick:i=>Ce(w),class:"select-topic-btn"},{default:t(()=>[...a[34]||(a[34]=[u(" 添加话题 ",-1)])]),_:1},8,["onClick"])])]),e(me,{modelValue:se.value,"onUpdate:modelValue":a[12]||(a[12]=i=>se.value=i),title:"添加话题",width:"600px",class:"topic-dialog"},{footer:t(()=>[l("div",Ua,[e(m,{onClick:a[11]||(a[11]=i=>se.value=!1)},{default:t(()=>[...a[39]||(a[39]=[u("取消",-1)])]),_:1}),e(m,{type:"primary",onClick:v},{default:t(()=>[...a[40]||(a[40]=[u("确定",-1)])]),_:1})])]),default:t(()=>[l("div",Va,[l("div",Aa,[e(Ue,{modelValue:j.value,"onUpdate:modelValue":a[10]||(a[10]=i=>j.value=i),placeholder:"输入自定义话题",class:"custom-input"},{prepend:t(()=>[...a[36]||(a[36]=[u("#",-1)])]),_:1},8,["modelValue"]),e(m,{type:"primary",onClick:Pe},{default:t(()=>[...a[37]||(a[37]=[u("添加",-1)])]),_:1})]),l("div",xa,[a[38]||(a[38]=l("h4",null,"推荐话题",-1)),l("div",Ta,[(r(),k(ue,null,re(ne,i=>{var G,Ve;return e(m,{key:i,type:(Ve=(G=F.value)==null?void 0:G.selectedTopics)!=null&&Ve.includes(i)?"primary":"default",onClick:Ja=>he(i),class:"topic-btn"},{default:t(()=>[u(A(i),1)]),_:2},1032,["type","onClick"])}),64))])])])]),_:1},8,["modelValue"]),w.selectedPlatform===3?(r(),k("div",Ma,[a[41]||(a[41]=l("h3",null,"商品链接",-1)),e(Ue,{modelValue:w.productTitle,"onUpdate:modelValue":i=>w.productTitle=i,type:"text",rows:1,placeholder:"请输入商品名称",maxlength:"200",class:"product-name-input"},null,8,["modelValue","onUpdate:modelValue"]),e(Ue,{modelValue:w.productLink,"onUpdate:modelValue":i=>w.productLink=i,type:"text",rows:1,placeholder:"请输入商品链接",maxlength:"200",class:"product-link-input"},null,8,["modelValue","onUpdate:modelValue"])])):N("",!0),l("div",Sa,[a[46]||(a[46]=l("h3",null,"定时发布",-1)),l("div",Pa,[e(ot,{modelValue:w.scheduleEnabled,"onUpdate:modelValue":i=>w.scheduleEnabled=i,"active-text":"定时发布","inactive-text":"立即发布"},null,8,["modelValue","onUpdate:modelValue"]),w.scheduleEnabled?(r(),k("div",za,[l("div",Da,[a[42]||(a[42]=l("span",{class:"label"},"每天发布视频数：",-1)),e(Je,{modelValue:w.videosPerDay,"onUpdate:modelValue":i=>w.videosPerDay=i,placeholder:"选择发布数量"},{default:t(()=>[(r(),k(ue,null,re(55,i=>e(Ie,{key:i,label:i,value:i},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])]),l("div",La,[a[44]||(a[44]=l("span",{class:"label"},"每天发布时间：",-1)),(r(!0),k(ue,null,re(w.dailyTimes,(i,G)=>(r(),Q(nt,{key:G,modelValue:w.dailyTimes[G],"onUpdate:modelValue":Ve=>w.dailyTimes[G]=Ve,start:"00:00",step:"00:30",end:"23:30",placeholder:"选择时间"},null,8,["modelValue","onUpdate:modelValue"]))),128)),w.dailyTimes.length<w.videosPerDay?(r(),Q(m,{key:0,type:"primary",size:"small",onClick:i=>w.dailyTimes.push("10:00")},{default:t(()=>[...a[43]||(a[43]=[u(" 添加时间 ",-1)])]),_:1},8,["onClick"])):N("",!0)]),l("div",Fa,[a[45]||(a[45]=l("span",{class:"label"},"开始天数：",-1)),e(Je,{modelValue:w.startDays,"onUpdate:modelValue":i=>w.startDays=i,placeholder:"选择开始天数"},{default:t(()=>[e(Ie,{label:"明天",value:0}),e(Ie,{label:"后天",value:1})]),_:1},8,["modelValue","onUpdate:modelValue"])])])):N("",!0)])]),l("div",Ra,[e(m,{size:"small",onClick:i=>O()},{default:t(()=>[...a[47]||(a[47]=[u("取消",-1)])]),_:1},8,["onClick"]),e(m,{size:"small",type:"primary",onClick:i=>_(w),loading:w.publishing||!1},{default:t(()=>[u(A(w.publishing?"发布中...":"发布"),1)]),_:2},1032,["onClick","loading"])])])),[[Oe,U.value===w.name]])),128))])])])}}},Ia=Se(Ea,[["__scopeId","data-v-e9b5b1f1"]]),Ba={class:"about"},Oa={__name:"About",setup(g){return(h,$)=>(r(),k("div",Ba,[...$[0]||($[0]=[l("h1",null,"关于我们",-1),l("p",null,"这是关于页面",-1)])]))}},Wa=Se(Oa,[["__scopeId","data-v-cd67ee8e"]]),Na=[{path:"/",name:"Dashboard",component:$l},{path:"/account-management",name:"AccountManagement",component:ds},{path:"/material-management",name:"MaterialManagement",component:Ds},{path:"/publish-center",name:"PublishCenter",component:Ia},{path:"/about",name:"About",component:Wa}],ja=ft({history:mt(),routes:Na}),qa=vt(),Fe=_t(Wt);for(const[g,h]of Object.entries(St))Fe.component(g,h);Fe.use(ja);Fe.use(qa);Fe.use(Pt);Fe.mount("#app");
